
;---------------------------------------------------------------------------
; Star Blink
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                    
ctrl = 0                         
anim = 200   
;facep2 = 1                                   
sprpriority = 2                  

[State 0, VarSet];Jab away
type = VarSet
trigger1 = prevstateno != 200
trigger1 = !time
var(31) = 0

[State 0, VarSet];No, you can't jab that much!
type = VarSet
trigger1 = prevstateno = 200
trigger1 = !time
var(31) = var(31) + 1

[State 0, Turn]
type = Turn
triggerall = animelem = 1
trigger1 = p2dist x < -10 
persistent = 0

[State 200, 1]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = S, NA                    
damage = 20, 2                   
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 4, Hit                
pausetime = 4, 4            
sparkno = -1                   
sparkxy = 2, -43            
hitsound = s100, 12                
guardsound = s500, 0                
ground.type = High            
ground.slidetime = 12
ground.hittime  = 12        
ground.velocity = -4;,-5
;-------------------   
air.hittime  = 12 
air.type = Low                  
air.velocity = -4,0   
;-------------------      
guard.hittime = 10 
guard.slidetime = 10
Guard.Velocity    = -4         
airguard.velocity = -4,0
airguard.hittime    = 12 
;-------------------   
ground.cornerpush.veloff = -3 + (2 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -3; - fvar(5)
guard.cornerpush.veloff = -3;-7;
airguard.cornerpush.veloff = -3
;-------------------   
fall.recovertime = 20
fall = 0
air.fall = 1
getpower = 25
givepower = 12-(6*(fvar(2) != 1)),3

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6000
scale = 0.74, 0.74
pos = 5, -65
sprpriority = 7
postype = p2
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6000
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%4
scale = 0.33, 0.33
postype = p2
pos = 5, -65
sprpriority = 6
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 201
ID = 201
Name = "Star"
Pos = 36, -66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.6

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 202
ID = 202
Name = "Effect"
Pos = 36, -66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.8

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 202
ID = 203
Name = "Effect"
Pos = 36, -66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 203
ID = 204
Name = "Effect 2"
Pos = 36, -66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.8

[State 200, 3]
type = PlaySnd
trigger1 = animelem = 3
value = s1200, 0
channel = 0

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------
[Statedef 201]
Physics = N
Anim    = 201
sprpriority = 6

[State 0, BindToParent]
type = BindToParent
triggerall = parent,stateno != 400 && parent,stateno != 181
trigger1 = 1
pos = 36, -66
ignorehitpause = 1

[State 0, Trans]
type = Trans
triggerall = time >= 6
trigger1 = 1
trans = addalpha
alpha = 256 - ((time - 6) * 75),256

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = 1 + 0.05*time + ((time > 6)*0.68),1+ 0.05*time + ((time > 6)*0.68)

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0
trigger2 = parent,stateno != 200 && parent,stateno != 400 && parent,stateno != 600 && parent,stateno != 181
trigger3 = parent,stateno = 200 && parent,animelem = 1
trigger4 = parent,stateno = 400 && parent,animelem = 1
trigger5 = parent,stateno = 600 && parent,animelem = 1

;--------------------------------------------------------------------------
[Statedef 202]
Physics = N
Anim    = 202
sprpriority = 4

[State 0, BindToParent]
type = BindToParent
triggerall = parent,stateno != 400 && parent,stateno != 181
trigger1 = 1
pos = 36, -66
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (time * 22),256

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = 1 + 0.15*time,1+ 0.15*time

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0
trigger2 = parent,stateno != 200 && parent,stateno != 400 && parent,stateno != 600 && parent,stateno != 181
trigger3 = parent,stateno = 200 && parent,animelem = 1
trigger4 = parent,stateno = 400 && parent,animelem = 1
trigger5 = parent,stateno = 600 && parent,animelem = 1

;--------------------------------------------------------------------------
[Statedef 203]
Physics = N
Anim    = 203
sprpriority = 5

[State 0, BindToParent]
type = BindToParent
triggerall = parent,stateno != 400 && parent,stateno != 181
trigger1 = 1
pos = 36, -66
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (time * 22),256

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = 1 + 0.15*time,1+ 0.15*time

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0
trigger2 = parent,stateno != 200 && parent,stateno != 400 && parent,stateno != 600 && parent,stateno != 181
trigger3 = parent,stateno = 200 && parent,animelem = 1
trigger4 = parent,stateno = 400 && parent,animelem = 1
trigger5 = parent,stateno = 600 && parent,animelem = 1

;---------------------------------------------------------------------------
; Broom Spin
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
velset = 0,0
anim = 210
facep2 = 1  
sprpriority = 2

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 230, 0

[State 210, 2]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = S, NA
animtype  = Medium
damage    = 40, 4
guardflag = MA
priority = 6, Hit 
pausetime = 5,5
sparkno = -1                   
sparkxy = 2, -43 
hitsound   = s10, 1 
guardsound = s500, 0
ground.type = Low             
ground.slidetime = 14
ground.hittime  = 14        
ground.velocity = -6 + (3 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 14 
air.type = Low                  
air.velocity = -3,-1.2   
;-------------------      
guard.hittime = 12  
guard.slidetime = 12
Guard.Velocity    = -7         
airguard.velocity = -3,-1.2
airguard.hittime    = 14 
;-------------------   
ground.cornerpush.veloff = -8 + (5 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -8; - fvar(5)
guard.cornerpush.veloff = -8;-7;
airguard.cornerpush.veloff = -8
;-------------------   
fall.recovertime = 30 
fall = 0
air.fall = 1
getpower = 50
givepower = 25-(12*(fvar(2) != 1)),6

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 211
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 211
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6001
scale = 0.54, 0.54
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6001
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6230+random%5
scale = 0.34, 0.34
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Dashing Broom Spin
[Statedef 215]
type    = S
movetype= A
physics = N
juggle  = 1
ctrl = 0
;velset = 0,0
anim = 215 
sprpriority = 2

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 215
value = , NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 0, VelSet]
type = VelMul
trigger1 = time > 27
x = 0.75

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 7
value = 230, 0

[State 210, 2]
type = HitDef
trigger1= animelem = 3
attr = S, NA
animtype  = Medium
damage    = 40, 4
guardflag = MA
priority = 7, Hit 
pausetime = 5,5
sparkno = -1                   
sparkxy = 2, -43 
hitsound   = s10, 1 
guardsound = s500, 0
ground.type = Low             
ground.slidetime = 14
ground.hittime  = 14        
ground.velocity = -6 + (3 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 14 
air.type = Low                  
air.velocity = -3,-1.75   
;-------------------      
guard.hittime = 12  
guard.slidetime = 12
Guard.Velocity    = -7         
airguard.velocity = -3,-1.75
airguard.hittime    = 14 
;-------------------   
ground.cornerpush.veloff = -8 + (5 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -8; - fvar(5)
guard.cornerpush.veloff = -8;-7;
airguard.cornerpush.veloff = -8
;-------------------   
fall.recovertime = 14 
fall = 0
air.fall = 1
getpower = 50
givepower = 25-(12*(fvar(2) != 1)),6

[State 210, 2]
type = HitDef
trigger1= animelem = 7
attr = S, NA
animtype  = Medium
damage    = 40, 4
guardflag = MA
priority = 7, Hit 
pausetime = 5,5
sparkno = -1                   
sparkxy = 2, -43 
hitsound   = s10, 1 
guardsound = s500, 0
ground.type = Low             
ground.slidetime = 14
ground.hittime  = 14        
ground.velocity = -6 + (3 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 14 
air.type = Low                  
air.velocity = -3,-1.75  
;-------------------      
guard.hittime = 12 
guard.slidetime = 12
Guard.Velocity    = -7         
airguard.velocity = -3,-1.75
airguard.hittime    = 14 
;-------------------   
ground.cornerpush.veloff = -8 + (5 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -8; - fvar(5)
guard.cornerpush.veloff = -8;-7;
airguard.cornerpush.veloff = -8
;-------------------   
fall.recovertime = 14 
fall = 0
air.fall = 1
getpower = 50
givepower = 25-(12*(fvar(2) != 1)),6

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 211
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 211
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = animelem = 7
anim = 211
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 211
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6001
scale = 0.54, 0.54
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6001
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6230+random%5
scale = 0.34, 0.34
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Broom Overhead
[Statedef 220]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                    
ctrl = 0                         
anim = 220                                      
sprpriority = 2     
facep2 = 1             

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 3

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 0
y = 0

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 65, 5
guardflag = HA
pausetime = 6,6
priority = 6, hit
sparkno = -1
sparkxy = 2, -75 
hitsound   = s10, 2 
guardsound = s500, 0
ground.type = Low             
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -7.5 + (3 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 19 
air.type = Low                  
air.velocity = -6,6  
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -6,6
airguard.hittime    = 19 
;-------------------   
ground.cornerpush.veloff = -11 + (8 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -11; - fvar(5)
guard.cornerpush.veloff = -11;-7;
airguard.cornerpush.veloff = -11
;-------------------   
fall.recovertime = 45
fall = 0
air.fall = 1
getpower = 75
givepower = 37-(18*(fvar(2) != 1)),9

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

[State 77000]
type = explod
trigger1 = animelem = 3
anim = 221
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 221
facing = 1
persistent = 0

[State 200, 3]
type = PlaySnd
trigger1 = animelem = 3
value = s210, 0

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; Dashing Rotating Star
[Statedef 225]
type    = S
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 225 
sprpriority = 2

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 225
value = , NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 0, VelSet]
type = Velset
trigger1 = animelem = 3
x = 7.5

[State 0, VelSet]
type = VelMul
trigger1 = time > 39
x = 0.75

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 6
trigger3 = animelem = 9
value = 1500, 3

[State 240, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = Medium
damage    = 10, 1
guardflag = MA
priority = 9, Hit 
pausetime = 1,1
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,1
guardsound = s500, 0
ground.type = High             
ground.slidetime = 18
ground.hittime  = 18        
ground.velocity = -5 + (2 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -1,-1  
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -5         
airguard.velocity = -1,-1
airguard.hittime    = 18 
;-------------------   
;ground.cornerpush.veloff = -11 + (8 * (enemy,statetype = A)); - fvar(5)
;air.cornerpush.veloff = -11; - fvar(5);
;guard.cornerpush.veloff = -11;-7;
;airguard.cornerpush.veloff = -11
;-------------------   
fall.recover = 0
fall = 0
air.fall = 1
getpower = 17
givepower = 4-(2*(fvar(2) != 1)),1

[State 240, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype  = Medium
damage    = 10, 1
guardflag = MA
priority = 9, Hit 
pausetime = 1,1
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,1
guardsound = s500, 0
ground.type = High             
ground.slidetime = 18
ground.hittime  = 18        
ground.velocity = -5 + (2 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -1,-1  
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -5         
airguard.velocity = -1,-1
airguard.hittime    = 18 
;-------------------   
;ground.cornerpush.veloff = -11 + (8 * (enemy,statetype = A)); - fvar(5)
;air.cornerpush.veloff = -11; - fvar(5);
;guard.cornerpush.veloff = -11;-7;
;airguard.cornerpush.veloff = -11
;-------------------   
fall.recover = 0
fall = 0
air.fall = 1
getpower = 17
givepower = 4-(2*(fvar(2) != 1)),1

[State 240, 2]
type = HitDef
trigger1 = animelem = 7
attr = S, NA
animtype  = Medium
damage    = 10, 1
guardflag = MA
priority = 9, Hit 
pausetime = 1,1
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,1
guardsound = s500, 0
ground.type = High             
ground.slidetime = 18
ground.hittime  = 18        
ground.velocity = -5 + (2 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -1,-1  
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -5         
airguard.velocity = -1,-1
airguard.hittime    = 18 
;-------------------   
;ground.cornerpush.veloff = -11 + (8 * (enemy,statetype = A)); - fvar(5)
;air.cornerpush.veloff = -11; - fvar(5);
;guard.cornerpush.veloff = -11;-7;
;airguard.cornerpush.veloff = -11
;-------------------   
fall.recover = 0
fall = 0
air.fall = 1
getpower = 17
givepower = 4-(2*(fvar(2) != 1)),1

[State 240, 2]
type = HitDef
trigger1 = animelem = 9
attr = S, NA
animtype  = Medium
damage    = 10, 1
guardflag = MA
priority = 9, Hit 
pausetime = 1,1
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,1
guardsound = s500, 0
ground.type = High             
ground.slidetime = 18
ground.hittime  = 18        
ground.velocity = -5 + (2 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -1,-1  
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -5         
airguard.velocity = -1,-1
airguard.hittime    = 18 
;-------------------   
;ground.cornerpush.veloff = -11 + (8 * (enemy,statetype = A)); - fvar(5)
;air.cornerpush.veloff = -11; - fvar(5);
;guard.cornerpush.veloff = -11;-7;
;airguard.cornerpush.veloff = -11
;-------------------   
fall.recover = 0
fall = 0
air.fall = 1
getpower = 17
givepower = 4-(2*(fvar(2) != 1)),1

[State 240, 2]
type = HitDef
trigger1 = animelem = 11
attr = S, NA
animtype  = Medium
damage    = 10, 1
guardflag = MA
priority = 9, Hit 
pausetime = 1,1
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,1
guardsound = s500, 0
ground.type = High             
ground.slidetime = 18
ground.hittime  = 18        
ground.velocity = -5 + (2 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -1,-1  
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -5         
airguard.velocity = -1,-1
airguard.hittime    = 18 
;-------------------   
;ground.cornerpush.veloff = -11 + (8 * (enemy,statetype = A)); - fvar(5)
;air.cornerpush.veloff = -11; - fvar(5);
;guard.cornerpush.veloff = -11;-7;
;airguard.cornerpush.veloff = -11
;-------------------   
fall.recover = 0
fall = 0
air.fall = 1
getpower = 17
givepower = 4-(2*(fvar(2) != 1)),1

[State 240, 2]
type = HitDef
trigger1 = animelem = 13
attr = S, NA
animtype  = Medium
damage    = 10, 1
guardflag = MA
priority = 9, Hit 
pausetime = 1,1
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,1
guardsound = s500, 0
ground.type = High             
ground.slidetime = 18
ground.hittime  = 18        
ground.velocity = -5 + (2 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -1,-1  
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -5         
airguard.velocity = -1,-1
airguard.hittime    = 18 
;-------------------   
;ground.cornerpush.veloff = -11 + (8 * (enemy,statetype = A)); - fvar(5)
;air.cornerpush.veloff = -11; - fvar(5);
;guard.cornerpush.veloff = -11;-7;
;airguard.cornerpush.veloff = -11
;-------------------   
fall.recover = 0
fall = 0
air.fall = 1
getpower = 17
givepower = 4-(2*(fvar(2) != 1)),1

[State 77000]
type = explod
trigger1 = animelem = 3
anim = 226
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 226
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = animelem = 3
anim = 227
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 227
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6001
scale = 0.54, 0.54
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6001
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6230+random%5
scale = 0.34, 0.34
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Broom Uppersweep
[Statedef 230]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 230
sprpriority = 3
facep2 = 1  

;[State 0, StateTypeSet]
;type = StateTypeSet
;trigger1 = !time
;physics = N      

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 2
y = -2

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 8
x = 0
y = -1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 8
physics = A 

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 230, 0

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
priority = 9, hit
damage    = 60, 6
guardflag = M
pausetime = 7,7
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,2
guardsound = s500, 0
ground.type = High             
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -1.5, -8.5
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -3,-5 
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -9         
airguard.velocity = -3,-1
airguard.hittime    = 19 
;-------------------   
ground.cornerpush.veloff = -15;0; - fvar(5)
air.cornerpush.veloff = -15;0; - fvar(5);
guard.cornerpush.veloff = -15;-7;
airguard.cornerpush.veloff = -15
;-------------------   
fall.recover = 0
fall = 1
getpower = 75
givepower = 37-(18*(fvar(2) != 1)),9

[State 77000]
type = explod
trigger1 = animelem = 3
anim = 231
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 231
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 232
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 6
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 232
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.85

[State 0, VelSet]
type = VelSet
triggerall = prevstateno = [600,699]
Trigger1 = Pos Y >= 0
Trigger1 = !time
x = 0
y = 0

[State 0, PosSet]
type = PosSet
triggerall = prevstateno = [600,699]
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
Trigger1 = !time
y = 0

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
;trigger2 = time > 34
value = 52
ctrl = 1

;---------------------------------------------------------------------------
; Tackle Attack
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 5
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2
facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 21
y = 0

[State 0, VelSet]
type = Velmul
trigger1 = animelemtime(5) >= 0 
trigger1 = animelemtime(7) <= 1 
x = 0.9

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 0
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s240, 0

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 240
value = , NT, AT, ST, HT
ignorehitpause = 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 60, 6
guardflag = MA
pausetime = 7,7
priority = 5
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -8, -3
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -8,-3 
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -9         
airguard.velocity = -8,-3
airguard.hittime    = 19 
;-------------------   
;ground.cornerpush.veloff = -15; - fvar(5)
;air.cornerpush.veloff = -15; - fvar(5);
;guard.cornerpush.veloff = -15;-7;
;airguard.cornerpush.veloff = -15
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 30-(15*(fvar(2) != 1)),7

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Tackle Attack - Combo Version
[Statedef 241]
type    = S
movetype= A
physics = S
juggle  = 5
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2
facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 21
y = 0

[State 0, VelSet]
type = Velmul
trigger1 = animelemtime(5) >= 0 
trigger1 = animelemtime(7) <= 1 
x = 0.9

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 0
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s240, 0

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 241
value = , NT, AT, ST, HT
ignorehitpause = 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 60, 6
guardflag = MA
pausetime = 7,7
priority = 6
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -8, -3.5
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -8,-3.5 
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -9         
airguard.velocity = -8,-3
airguard.hittime    = 19 
;-------------------   
;ground.cornerpush.veloff = -15; - fvar(5)
;air.cornerpush.veloff = -15; - fvar(5);
;guard.cornerpush.veloff = -15;-7;
;airguard.cornerpush.veloff = -15
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 30-(15*(fvar(2) != 1)),7
id = 11500

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit
trigger1 = var(20) = 0
Value = 10003
ID = 11500
IgnoreHitPause = 1
Persistent = 0 

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Homerun Sweep
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 5
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2
facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 10
y = 0

[State 0, VelSet]
type = Velmul
trigger1 = animelemtime(5) >= 0 
trigger1 = animelemtime(8) <= 1 
x = 0.9

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 8
x = 0
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = s210, 0

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Heavy
damage    = 80, 8
guardflag = M
pausetime = 7,7
priority = 9
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20        
ground.velocity = -9, -3
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -9,-3 
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -12         
airguard.velocity = -9,-3
airguard.hittime    = 20 
;-------------------   
ground.cornerpush.veloff = -17; - fvar(5)
air.cornerpush.veloff = -17; - fvar(5);
guard.cornerpush.veloff = -17;-7;
airguard.cornerpush.veloff = -17
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 40-(20*(fvar(2) != 1)),10
id = 11250

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit
trigger1 = var(20) = 0
Value = 10040
ID = 11250
IgnoreHitPause = 1
Persistent = 0 

[State 77000]
type = explod
trigger1 = animelem = 5
anim = 251
scale = 0.61, 0.47
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 251
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Low Star Blink
[Statedef 400]
type    = C                      
movetype= A                      
physics = C                      
juggle  = 1                      
velset = 0,0                    
ctrl = 0                         
anim = 400   
facep2 = 1                                   
sprpriority = 2                  

[State 200, 1]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = C, NA                     
damage = 20, 2                   
animtype = Light                 
guardflag = L                   
hitflag = MAF                    
priority = 4, Hit                
pausetime = 4, 4                
sparkno = -1                   
sparkxy = 2, -43            
hitsound = s100, 12                
guardsound = s500, 0                
ground.type = Low             
ground.slidetime = 12
ground.hittime  = 12        
ground.velocity = -4;,-5
;-------------------   
air.hittime  = 12 
air.type = Low                  
air.velocity = -4,0   
;-------------------      
guard.hittime = 10 
guard.slidetime = 10
Guard.Velocity    = -4         
airguard.velocity = -4,0
airguard.hittime    = 12
;-------------------   
ground.cornerpush.veloff = -3 + (2 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -3; - fvar(5)
guard.cornerpush.veloff = -3;-7;
airguard.cornerpush.veloff = -3
;-------------------   
fall.recovertime = 15
fall = 0
air.fall = 1
getpower = 25
givepower = 12-(6*(fvar(2) != 1)),3

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6000
scale = 0.74, 0.74
pos = 5, -29
sprpriority = 7
postype = p2
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6000
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%4
scale = 0.33, 0.33
postype = p2
pos = 5, -65
sprpriority = 6
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 201
ID = 201
Name = "Star"
Pos = 39, -7
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.6

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 202
ID = 202
Name = "Effect"
Pos = 39, -7
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.8

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 202
ID = 203
Name = "Effect"
Pos = 39, -7
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 203
ID = 204
Name = "Effect 2"
Pos = 39, -7
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.8

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[State 200, 3]
type = PlaySnd
trigger1 = animelem = 3
value = s1200, 0
channel = 0

;---------------------------------------------------------------------------
; Aerial Star Blink
[Statedef 600]
type    = A                      
movetype= A                      
physics = N                      
juggle  = 1                                         
ctrl = 0                         
anim = 200   
facep2 = 1                                   
sprpriority = 2                  

[State 0, Gravity]
type = Gravity
trigger1 = 1
ignorehitpause = 1

[State 0, VarSet];Jab away
type = VarSet
trigger1 = prevstateno != 600
trigger1 = !time
var(31) = 0

[State 0, VarSet];No, you can't jab that much!
type = VarSet
trigger1 = prevstateno = 600
trigger1 = !time
var(31) = var(31) + 1

[State 200, 1]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = A, NA                     
damage = 20, 2                   
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 4, Hit                
pausetime = 4, 4                
sparkno = -1                   
sparkxy = 2, -43            
hitsound = s100, 12                
guardsound = s500, 0                
ground.type = High             
ground.slidetime = 12
ground.hittime  = 12        
ground.velocity = -4;,-5
;-------------------   
air.hittime  = 12 
air.type = Low                  
air.velocity = -4,0   
;-------------------      
guard.hittime = 10 
guard.slidetime = 10
Guard.Velocity    = -4         
airguard.velocity = -4,0
airguard.hittime    = 12 
;-------------------   
ground.cornerpush.veloff = -3 + (2 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -3; - fvar(5)
guard.cornerpush.veloff = -3;-7;
airguard.cornerpush.veloff = -3
;-------------------   
fall.recovertime = 15
fall = 0
air.fall = 1
getpower = 25
givepower = 12-(6*(fvar(2) != 1)),3

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6000
scale = 0.74, 0.74
pos = 5, -65
sprpriority = 7
postype = p2
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6000
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%4
scale = 0.33, 0.33
postype = p2
pos = 5, -65
sprpriority = 6
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 201
ID = 201
Name = "Star"
Pos = 36, -66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.6

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 202
ID = 202
Name = "Effect"
Pos = 36, -66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.8

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 202
ID = 203
Name = "Effect"
Pos = 36, -66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 203
ID = 204
Name = "Effect 2"
Pos = 36, -66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.8

[State 200, 3]
type = PlaySnd
trigger1 = animelem = 3
value = s1200, 0
channel = 0

[State 0, VelSet]
type = Velmul
Trigger1 = Pos Y >= 0
x = 0.9
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.9

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Aerial Broom Spin
[Statedef 610]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 210
facep2 = 1  
sprpriority = 2

[State 0, Gravity]
type = Gravity
trigger1 = 1
ignorehitpause = 1

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 230, 0

[State 210, 2]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = A, NA
animtype  = Medium
damage    = 40, 4
guardflag = MA
priority = 6, Hit 
pausetime = 5,5
sparkno = -1                   
sparkxy = 2, -43 
hitsound   = s10, 1 
guardsound = s500, 0
ground.type = Low             
ground.slidetime = 14
ground.hittime  = 14        
ground.velocity = -6 + (3 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 14 
air.type = Low                  
air.velocity = -3,-1   
;-------------------      
guard.hittime = 12  
guard.slidetime = 12
Guard.Velocity    = -7         
airguard.velocity = -3,-1
airguard.hittime    = 14 
;-------------------   
ground.cornerpush.veloff = -8 + (5 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -8; - fvar(5)
guard.cornerpush.veloff = -8;-7;
airguard.cornerpush.veloff = -8
;-------------------   
fall.recovertime = 14 
fall = 0
air.fall = 1
getpower = 50
givepower = 25-(12*(fvar(2) != 1)),6

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 211
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 211
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6001
scale = 0.54, 0.54
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6001
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6230+random%5
scale = 0.34, 0.34
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.93

[State 0, VelSet]
type = Velmul
Trigger1 = Pos Y >= 0
x = 0.9
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Aerial Broom Overhead
[Statedef 620]
type    = A                      
movetype= A                      
physics = N                     
juggle  = 1                                      
ctrl = 0                         
anim = 220                                      
sprpriority = 2     
facep2 = 1             

[State 0, Gravity]
type = Gravity
trigger1 = 1
ignorehitpause = 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Heavy
damage    = 65, 5
guardflag = HA
pausetime = 6,6
priority = 6
sparkno = -1
sparkxy = 2, -75 
hitsound   = s10, 2 
guardsound = s500, 0
ground.type = Low             
ground.slidetime = 18
ground.hittime  = 18        
ground.velocity = -9 + (3 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 18 
air.type = Low                  
air.velocity = -6,6  
;-------------------      
guard.hittime = 16
guard.slidetime = 16
Guard.Velocity    = -9         
airguard.velocity = -6,6
airguard.hittime    = 18 
;-------------------   
ground.cornerpush.veloff = -11 + (8 * (enemy,statetype = A)); - fvar(5)
air.cornerpush.veloff = -11; - fvar(5)
guard.cornerpush.veloff = -11;-7;
airguard.cornerpush.veloff = -11
;-------------------   
fall.recovertime = 18
fall = 0
air.fall = 1
getpower = 75
givepower = 37-(18*(fvar(2) != 1)),9

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

[State 77000]
type = explod
trigger1 = animelem = 3
anim = 221
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 221
facing = 1
persistent = 0

[State 200, 3]
type = PlaySnd
trigger1 = animelem = 3
value = s210, 0

[State 0, VelSet]
type = Velmul
Trigger1 = Pos Y >= 0
x = 0.9
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Aerial Broom Uppersweep
[Statedef 630]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 230
sprpriority = 3
facep2 = 1  

[State 0, Gravity]
type = Gravity
trigger1 = 1
ignorehitpause = 1   

;[State 605, ??]
;Type = VelMul
;Trigger1 = Time = 0
;X = 0.2
;Y = 0.2

[State 210, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 230, 0

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Heavy
priority = 9
damage    = 60, 6
guardflag = M
pausetime = 7,7
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,2
guardsound = s500, 0
ground.type = High             
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -1.5, -8.5
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -3,-5 
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -9         
airguard.velocity = -3,-1
airguard.hittime    = 19 
;-------------------   
ground.cornerpush.veloff = -15; - fvar(5)
air.cornerpush.veloff = -15; - fvar(5);
guard.cornerpush.veloff = -15;-7;
airguard.cornerpush.veloff = -15
;-------------------   
fall.recover = 0
fall = 1
getpower = 75
givepower = 37-(18*(fvar(2) != 1)),9


[State 77000]
type = explod
trigger1 = animelem = 3
anim = 231
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 231
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 232
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 6
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 232
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.85

[State 0, VelSet]
type = Velmul
Trigger1 = Pos Y >= 0
x = 0.9
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = movehit = 1
fvar(2) = fvar(2)*0.87

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
trigger2 = time > 34
ctrl = 1

;---------------------------------------------------------------------------
; Aerial Tackle Attack
[Statedef 640]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 240
sprpriority = 2
facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 8
y = 0

[State 0, VelSet]
type = Velmul
trigger1 = animelemtime(5) >= 0 
trigger1 = animelemtime(7) <= 1 
x = 0.9

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
physics = A         ;A,C,S,N

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s240, 0

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 640
value = , NT, AT, ST, HT
ignorehitpause = 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Heavy
damage    = 60, 6
guardflag = MA
pausetime = 7,7
priority = 5
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -8, -3
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -8,-3 
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -9         
airguard.velocity = -8,-3
airguard.hittime    = 19 
;-------------------   
;ground.cornerpush.veloff = -15; - fvar(5)
;air.cornerpush.veloff = -15; - fvar(5);
;guard.cornerpush.veloff = -15;-7;
;airguard.cornerpush.veloff = -15
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 30-(15*(fvar(2) != 1)),7

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

;[State 0, VelSet]
;type = VelSet
;Trigger1 = Pos Y >= 0
;x = 0
;y = 0
;ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Aerial Tackle Attack - Combo Version
[Statedef 641]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 240
sprpriority = 2
facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 8
y = 0

[State 0, VelSet]
type = Velmul
trigger1 = animelemtime(5) >= 0 
trigger1 = animelemtime(7) <= 1 
x = 0.9

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
physics = A         ;A,C,S,N

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s240, 0

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 641
value = , NT, AT, ST, HT
ignorehitpause = 1

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Heavy
damage    = 60, 6
guardflag = MA
pausetime = 7,7
priority = 6
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -8, -3
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -8,-3 
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -9         
airguard.velocity = -8,-3
airguard.hittime    = 19 
;-------------------   
;ground.cornerpush.veloff = -15; - fvar(5)
;air.cornerpush.veloff = -15; - fvar(5);
;guard.cornerpush.veloff = -15;-7;
;airguard.cornerpush.veloff = -15
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 30-(15*(fvar(2) != 1)),7
id = 11500

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit
trigger1 = var(20) = 0
Value = 10003
ID = 11500
IgnoreHitPause = 1
Persistent = 0 

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

;[State 0, VelSet]
;type = VelSet
;Trigger1 = Pos Y >= 0
;x = 0
;y = 0
;ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Aerial Homerun Sweep
[Statedef 650]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 250
sprpriority = 2
facep2 = 1

[State 0, Gravity]
type = Gravity
trigger1 = 1
ignorehitpause = 1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = s210, 0

[State 240, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Heavy
damage    = 80, 8
guardflag = MA
pausetime = 7,7
priority = 9
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20        
ground.velocity = -9, -3
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -9,-3 
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -12         
airguard.velocity = -9,-3
airguard.hittime    = 20 
;-------------------   
ground.cornerpush.veloff = -17; - fvar(5)
air.cornerpush.veloff = -17; - fvar(5);
guard.cornerpush.veloff = -17;-7;
airguard.cornerpush.veloff = -17
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 40-(20*(fvar(2) != 1)),10
id = 11250

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit
trigger1 = var(20) = 0
Value = 10040
ID = 11250
IgnoreHitPause = 1
Persistent = 0 

[State 77000]
type = explod
trigger1 = animelem = 5
anim = 251
scale = 0.61, 0.47
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 251
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

[State 0, VelSet]
type = Velmul
Trigger1 = Pos Y >= 0
x = 0.9
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Comet Trail
[Statedef 660]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 600
sprpriority = 2
facep2 = 1

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 660
value = , NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 8
y = 3.5

[State 200, 3]
type = PlaySnd
triggerall = anim = 600
trigger1 = animelem = 3
value = s1300, 1

[State 240, 2]
type = HitDef
triggerall = anim = 600
trigger1 = time
attr = A, NA
animtype  = Med
damage    = 20, 2
guardflag = HA
priority = 9, Hit 
pausetime = 3,3
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,2
guardsound = s500, 0
ground.type = High             
ground.slidetime = 14
ground.hittime  = 14        
ground.velocity = -6 + (3 * (enemy,statetype = A ));,-5
;-------------------   
air.hittime  = 14 
air.type = High                  
air.velocity = -3,0  
;-------------------      
guard.hittime = 12  
guard.slidetime = 12
Guard.Velocity    = -7         
airguard.velocity = -3,0
airguard.hittime    = 14 
;-------------------   
;ground.cornerpush.veloff = -15; - fvar(5)
;air.cornerpush.veloff = -15; - fvar(5);
;guard.cornerpush.veloff = -15;-7;
;airguard.cornerpush.veloff = -15
;-------------------   
fall.recovertime = 15
fall = 0
air.fall = 1
getpower = 15
givepower = 8-(4*(fvar(2) != 1)),2
persistent = 6

[State 240, 2]
type = HitDef
triggerall = anim = 601
trigger1 = Time
attr = A, NA
animtype  = Heavy
damage    = 35, 3
guardflag = HA
pausetime = 7,7
priority = 9
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20        
ground.velocity = -3.7,7 
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -3.7,7 
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -12         
airguard.velocity = -3.7,7 
airguard.hittime    = 20 
;-------------------   
ground.cornerpush.veloff = -17; - fvar(5)
air.cornerpush.veloff = -17; - fvar(5);
guard.cornerpush.veloff = -17;-7;
airguard.cornerpush.veloff = -17
;-------------------   
fall.recover = 0
fall = 1
getpower = 75
givepower = 37-(18*(fvar(2) != 1)),9
persistent = 0
id = 11500

[State 201];Ground Bounce
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit  
trigger1 = var(21) = 0
Value = 10052
ID = 11500
IgnoreHitPause = 1
Persistent = 1

[State 600]
Type = Helper
Trigger1 = animelem = 3
StateNo = 661
ID = 661
Name = "Effect"
Pos = -65, -54
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.0
Size.YScale = 1.0

[State 77000]
type = explod
triggerall = anim = 600
trigger1 = movehit = 2
anim = 6001
scale = 0.54, 0.54
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6001
facing = 1
persistent = 1

[State 77000]
type = explod
triggerall = anim = 600
trigger1 = movehit = 2
anim = 6230+random%5
scale = 0.34, 0.34
postype = p2
pos = 0, -56
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
triggerall = anim = 601
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
triggerall = anim = 601
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
triggerall = anim = 601
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
triggerall = anim = 601
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

[State 0, VelSet]
type = VelSet
Trigger1 = Pos Y >= 0
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = Velmul
Trigger1 = Pos Y >= 0
x = 0.8
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 240, 3]
type = Changeanim
Trigger1 = Pos Y >= 0
trigger1 = Anim = 600
value = 601

[State 77000]
type = explod
Trigger1 = Pos Y >= 0
anim = 602
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 661
facing = 1
persistent = 0

[State 200, 3]
type = PlaySnd
Trigger1 = Pos Y >= 0
value = s220, 0
persistent = 0

[State 0, VarSet]
type = VarSet
triggerall = anim = 600
trigger1 = movehit = 1
fvar(2) = fvar(2)*0.955

[State 0, VarSet]
type = VarSet
triggerall = anim = 601
trigger1 = movehit = 1
fvar(2) = fvar(2)*0.92

[State 605, ??]
Type = ChangeState
Trigger1 = anim = 601
trigger1 = AnimTime = 0
Value = 0
ctrl = 1

;--------------------------------------------------------------------------
[Statedef 661]
Physics = N
Anim    = 603
sprpriority = 3

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = -65, -54
ignorehitpause = 1

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 335

[State 6000,~??~]
Type     = DestroySelf
trigger1 = parent,stateno != 660
trigger2 = parent,stateno = 660 && parent,pos y >= 0
ignorehitpause = 0

;---------------------------------------------------------------------------
;Starshards
[Statedef 1000]
Type     = S
MoveType = A
Physics  = S
Anim     = 1000
Ctrl     = 0
Facep2   = 1
poweradd = 75

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 5
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 5
var(42) = 60

[State 0, Turn]
type = Turn
trigger1 = animelem = 4 && p2bodydist x < -10

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1000, 2

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1001
ID = 1001
Name = "Blast"
Pos = 15,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1003
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1004
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1005
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1006
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1007
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1004
ID = 1009
Name = "Light"
Pos = 15,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 2.0
Size.YScale = 2.0

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1005
ID = 1010
Name = "Light"
Pos = 15,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 600]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
ctrl=1

;--------------------------------------------------------------------------
[Statedef 1001]
type = A
movetype = A
physics = N
ctrl=0
anim=1001
sprpriority=4

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 4.8
y = 0

[State 0, VelMul]
type = VelMul
trigger1 = time
x = 1.02

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State ]
Type = AngleDraw
Trigger1 = 1
Value = time * 10

[State Hitdef]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = A,  NP
damage = floor((25*(3*(palno = 12)))+25*root,fvar(3)),2
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,5
guard.pausetime = 0,0
sparkno = -1
sparkxy = 0,0 
hitsound = s100, 17                
guardsound = s500, 0   
ground.type = High
air.type = High
ground.hittime  = 12
guard.hittime= 12
ground.velocity = -10
guard.velocity= -10
guard.slidetime = 12
air.velocity =-1,-1
airguard.velocity=-1,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
fall = 0+(1*(enemy,statetype = A))
fall.recover = 1 - ((enemy,statetype = A) * 1) 
fall.recovertime = 30
givepower = 12-(6*(root,fvar(2) != 1)),3

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 1707+random%2
scale = 0.67, 0.67
postype = p1
pos = 10, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 0

[State 600]
Type = Helper
Trigger1 = !time
StateNo = 1002
ID = 1002
Name = "Tail"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.1

[State 0, VarSet]
type = parentVarSet
trigger1 = movehit = 1
fvar(2) = parent,fvar(2)*0.75

[State 0, destroyself]
type = Destroyself
trigger1 = movehit
trigger2 = moveguarded
trigger3 = movereversed
trigger4 = frontedgedist<-75
trigger5 = backedgedist<-75
trigger6 = time = 120

;--------------------------------------------------------------------------
[Statedef 1002]
type = U
movetype = A
physics = N
sprpriority=2
Anim    = 1003

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 4.8
y = 0

[State 0, VelMul]
type = VelMul
trigger1 = time
x = 1.02

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 90
;scale = 

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1.0,1.0+time*0.08
;ignorehitpause = 
;persistent = 

[State 6000,~??~]
Type     = DestroySelf
trigger1 = parent,movehit
trigger2 = parent,moveguarded
trigger3 = parent,movereversed
trigger4 = parent,frontedgedist<-75
trigger5 = parent,backedgedist<-75
trigger6 = time = 120

;--------------------------------------------------------------------------
[Statedef 1003]
type = A
movetype = A
physics = N
ctrl=0
anim=1002
sprpriority=4

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1003) || ishelper(1004) || ishelper(1005) || ishelper(1006) || ishelper(1007)
trigger1 = !time
x = 3.7 + ((random%6) * 0.1)
y = ((pos y) + 55 - root,pos y) * 0.1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1525)
trigger1 = !time
x = -3.7 + ((random%6) * 0.1)
y = 5 - random%10 

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1526)
trigger1 = !time
x = -4 + (random%4)
y = 5 - random%10 

[State 0, VelMul]
type = VelMul
trigger1 = time
x = 1.01

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State ]
Type = AngleDraw
Trigger1 = 1
Value = time * 8

[State Hitdef]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = A,  NP
damage = floor((15*(3*(palno = 12)))+15*root,fvar(3)),1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,5
guard.pausetime = 0,0
sparkno = -1
sparkxy = 0,0 
hitsound = s100, 17                
guardsound = s500, 0   
ground.type = High
air.type = High
ground.hittime  = 10
guard.hittime= 10
ground.velocity = -10
guard.velocity= -10
guard.slidetime = 10
air.velocity =-1,-1
airguard.velocity=-1,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
fall = 0+(1*(enemy,statetype = A))
fall.recover = 1 - ((enemy,statetype = A) * 1) 
fall.recovertime = 30
givepower = 6-(3*(root,fvar(2) != 1)),1

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 1707+random%2
scale = 0.5, 0.5
postype = p1
pos = 10, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 0

[State 0, VarSet]
type = parentVarSet
trigger1 = movehit = 1
fvar(2) = parent,fvar(2)*0.985

[State 0, destroyself]
type = Destroyself
trigger1 = movehit
trigger2 = moveguarded
trigger3 = movereversed
trigger4 = frontedgedist<-75
trigger5 = backedgedist<-75
trigger6 = time = 120

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 1004]
type = A
movetype = A
physics = N
ctrl=0
anim=1004
sprpriority=3
velset=8,0

[State 0, AngleSet]
type = Angledraw
trigger1 = 1
scale = 1 + time * 0.1,1 - time * 0.1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (time * 30),256

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 1005]
type = A
movetype = A
physics = N
ctrl=0
anim=1005
sprpriority=2
;velset=0 - (3 * ishelper(1204)),0

[State 0, AngleSet]
type = Angledraw
trigger1 = 1
value = 270
scale = 1,1 + time * 0.08

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (time *50),256

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Aerial Starshards
[Statedef 1050]
Type     = A
MoveType = A
Physics  = N
Anim     = 1000
Ctrl     = 0
Facep2   = 1
poweradd = 75

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 5
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 5
var(42) = 60

[State 0, Turn]
type = Turn
trigger1 = animelem = 4 && p2bodydist x < -10

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = -3.5
y = -0.5

[State 0, Gravity]
type = Gravity
trigger1 = time > 16

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = 1000, 2

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1001
ID = 1001
Name = "Blast"
Pos = 15,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1003
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1003
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1003
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1003
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1003
ID = 1003
Name = "Smaller Blast"
Pos = -5 + random%30,-45 - random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1004
ID = 1009
Name = "Light"
Pos = 15,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 2.0
Size.YScale = 2.0

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1005
ID = 1010
Name = "Light"
Pos = 15,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 0, VelSet]
type = VelSet
Trigger1 = Pos Y >= 0
x = 0
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
;Constellarbeam
[Statedef 1100]
Type     = S
MoveType = A
Physics  = S
Anim     = 1100
Ctrl     = 0
Facep2   = 1
poweradd = 95

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 5
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 5
var(42) = 60

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = -10

[State 0, VelSet]
type = Velmul
trigger1 = time > 12
x = 0.9

[State 0, Turn]
type = Turn
trigger1 = animelem = 4 && p2bodydist x < -30

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1101
ID = 1101
Name = "Beam"
Pos = 38,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.0
Size.YScale = 1.0

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 1104
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1104
facing = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S11000,1

[State 600]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
ctrl=1

;---------------------------------------------------------------------------
[Statedef 1101]
type = A
movetype = A
physics = N
ctrl=0
anim= 1101
sprpriority=9
velset=0,0

[State 0, BindToParent]
type = BindToParent
triggerall = parent,stateno = [1100,1150]
trigger1 = 1
time = 999
pos = 38,-55
ignorehitpause = 1

[State 600]
Type = Helper
Trigger1 = !time
StateNo = 1102
ID = 1102
Name = "Sun"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.8

[State 600]
Type = Helper
Trigger1 = !time
StateNo = 1103
ID = 1103
Name = "Moving Sun"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.8

[State 0, SprPriority]
type = SprPriority
trigger1 = movehit
value = 9
ignorehitpause = 1
;persistent = 1

[State AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1,1.5-(var(24)*0.25)-((time<6)*((time+7)*.25))
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(24) = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time > 33
trigger2 = root,stateno != [1100,1199]
var(24) = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State -1]
Type = HitDef
triggerall = hitcount < 5
Trigger1= 1
Attr              = A, SP
Damage            = floor(((enemy,lifemax/100*2*(3*(palno = 12)))+enemy,lifemax/100*2)*root,fvar(3)),2
AnimType          = Up			
HitFlag           = MAF				
GuardFlag         = MA				
Priority          = 9, Hit			
PauseTime         = 0, 8			
SparkNo           = -1				
Sparkxy           = 0, 0			
Ground.Type       = High			
Air.Type          = High			
hitsound = S100,10
guardsound = S100,10
Ground.SlideTime  = 14
Ground.HitTime    = 14				
Air.HitTime       = 14
Ground.Velocity   = -1,-6
Guard.Velocity    = -10
guard.slidetime = 12
Air.Velocity      = -1,-5.5
AirGuard.Velocity = -1,-5.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
Fall              = 1
Persistent        = 5
fall.recover = 1 - ((enemy,statetype = A) * 1) 
fall.recovertime = 30
givepower = 5-(2*(root,fvar(2) != 1)),1

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 6310+random%4
scale = 0.67, 0.67
postype = p2
pos = 2, -45
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6300+random%5
scale = 0.67, 0.67
postype = p2
pos = 2, -45
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6005
scale = 0.67, 0.67
postype = p2
pos = 2, -45
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6005
facing = 1
persistent = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

;[State 0, VarSet]
;type = parentVarSet
;trigger1 = movehit = 1
;fvar(2) = parent,fvar(2)*0.96

[State RemoveHelper]
type = Destroyself
trigger1 = animtime = 0
trigger2 = parent,movetype = H 
trigger3 = parent,stateno = 52
trigger4 = var(24) = 6


;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 1102]
type = A
movetype = A
physics = N
ctrl=0
anim=1102
sprpriority=3
velset=0,0

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 3
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 3
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 3
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 3
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 3
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger2 = var(15) = 3
var(15) = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time
var(15) = 1

[State RemoveHelper]
type = Destroyself
trigger1 = numhelper(1101) = 0

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 999
pos = 0,0
ignorehitpause = 1
;persistent = 

[State AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1-((time>34)*((time-34)*.16)),1.0-((time>34)*((time-34)*.16))
value = 1 + time * 4
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 1103]
type = A
movetype = A
physics = N
ctrl=0
anim=1102
sprpriority=3
velset = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = root,stateno = [1100,1150]
x = 23.5
y = 0
ignorehitpause = 1

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 2
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 2
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 2
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 2
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 600]
Type = Helper
triggerall = time < 35
triggerall = var(15) = 2
Trigger1 = time%2
StateNo = 1104
ID = 1104
Name = "Effect Arrows"
Pos = 0, 0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.43
Size.YScale = 0.43

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger2 = var(15) = 2
var(15) = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time
var(15) = 1

[State AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1-((time>34)*((time-34)*.16)),1.0-((time>34)*((time-34)*.16))
value = 1 + time * 4
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State RemoveHelper]
type = Destroyself
trigger1 = numhelper(1101) = 0

;--------------------------------------------------------------------------
[Statedef 1104]
Physics = N
Anim    = 8001
sprpriority = 5

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, VelSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = cos(random%360)*7
y = sin(random%360)*7

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = (Vel X)
Value = var(0) + time * 5;ATan(Vel Y/Vel X)*(-180.0/Pi)+((Vel X<0)*180)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1-((time>5)*((time-5)*.2)), 1-((time>5)*((time-5)*.2))

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = time = 10

;---------------------------------------------------------------------------
;Aerial Constellarbeam
[Statedef 1150]
Type     = A
MoveType = A
Physics  = N
Anim     = 1100
Ctrl     = 0
Facep2   = 1
poweradd = 95

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = -3.5
y = -0.5

[State 0, VelMul]
type = VelMul
trigger1 = time > 10
x = 0.95
y = 0.95

[State 0, Gravity]
type = Gravity
trigger1 = time > 48

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 5
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 5
var(42) = 60

[State 0, Turn]
type = Turn
trigger1 = animelem = 4 && p2bodydist x < -30

[State 600]
Type = Helper
Trigger1 = AnimElem = 5
StateNo = 1101
ID = 1101
Name = "Beam"
Pos = 38,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.0
Size.YScale = 1.0

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 1104
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1104
facing = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S11000,1

[State 0, VelSet]
type = VelSet
Trigger1 = Pos Y >= 0
x = 0
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0
ignorehitpause = 1

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
Trigger1 = !time
value = 1100
ctrl = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Witch Ley Line
[Statedef 1200]
type    = S
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 1200
facep2 = 1  
sprpriority = 2

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 1200
value = , NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [600,699]
trigger1 = !time
y = 0

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, VelSet]
type = Velset
trigger1 = animelem = 4
x = 15
ignorehitpause = 0

[State 0, VelSet]
type = Velset
trigger1 = time > 13
trigger1 = vel x <= 0
x = 15
ignorehitpause = 0

[State 0, VelSet]
type = VelMul
trigger1 = time > 48
x = 0.75
ignorehitpause = 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s2600, 1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s2600, 2

[State 240, 2]
type = HitDef
triggerall = hitcount = 0
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -14,0 - ((p2dist y > -35) * 2.5) + ((p2dist y < -35) * 2.5)
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -14,0 - ((p2dist y > -35) * 1.2) + ((p2dist y < -35) * 1.2)
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-0.5
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0


[State 240, 2]
type = HitDef
triggerall = hitcount = 1 || moveguarded = [0,8]
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,14
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -14,0 - ((p2dist y > -35) * 2.5) + ((p2dist y < -35) * 2.5)
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -14, 0 - ((p2dist y > -35) * 1.2) + ((p2dist y < -35) * 1.2) 
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-0.5
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

[State 240, 2]
type = HitDef
triggerall = hitcount = 2 || moveguarded = [0,8]
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,14
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -14,0 - ((p2dist y > -35) * 2.5) + ((p2dist y < -35) * 2.5)
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -14,0 - ((p2dist y > -35) * 1.2) + ((p2dist y < -35) * 1.2)
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-0.5
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

[State 240, 2]
type = HitDef
triggerall = hitcount = 3 || moveguarded = [0,8]
trigger1 = animelem = 10
trigger2 = animelem = 11
trigger3 = animelem = 12
trigger4 = animelem = 13
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,14
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -14,0 - ((p2dist y > -35) * 2.5) + ((p2dist y < -35) * 2.5)
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -14,0 - ((p2dist y > -35) * 1.2) + ((p2dist y < -35) * 1.2)
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-0.5
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

[State 240, 2]
type = HitDef
triggerall = hitcount = 4 || moveguarded = [0,8]
trigger1 = animelem = 12
trigger2 = animelem = 13
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,14
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -2.5, -6
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -2.5,-6 
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-1.2
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

;[State 0, TargetBind]
;type = TargetBind
;trigger1 = movehit = 1
;time = 1
;id = -1
;pos = 10,enemy, pos y
;ignorehitpause = 1
;persistent = 

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 1201
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1210
facing = 1
persistent = 0

[State 600]
Type = Helper
triggerall = numhelper(1201) = 0
trigger1 = animelem = 4
StateNo = 1201
ID = 1201
Name = "Broom Effect"
Pos = -44,-9
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 2.0
Size.YScale = 1.4

[State 600]
Type = Helper
trigger1 = numhelper(1201) != 0
trigger1 = numhelper(1202) = 0
StateNo = 1202
ID = 1202
Name = "Ring Effect"
Pos = 40,-30
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.9
Size.YScale = 0.9

[State 600]
Type = Helper
trigger1 = animelem = 14
StateNo = 1201
ID = 1203
Name = "Broom Effect"
Pos = -95,-2
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.0
Size.YScale = 2.1

[State 600]
Type = Helper
trigger1 = animelem = 14
StateNo = 1202
ID = 1204
Name = "Ring Effect"
Pos = 0,-30
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.35
Size.YScale = 1.35

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 702
scale = 1.0, 1.0
postype = p1
pos = 3, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 2
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

[State 0, Width]
type = Width
trigger1 = time > 13
edge = 40,0
player = 0,0
ignorehitpause = 1

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.96

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 1201]
type = A
movetype = A
physics = N
ctrl=0
anim=183
sprpriority=4
velset=0,0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = ishelper(1203)
trigger1 = !time
value= 183
elem = 2

[State 0, BindToParent]
type = BindToParent
triggerall = ishelper(1201)
trigger1 = 1
time = 999
pos = -44,-9
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
triggerall = ishelper(1203)
trigger1 = 1
time = 999
pos = -95,-2
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add 

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent,animelem = 14 && ishelper(1201)
trigger2 = parent,stateno != 1200 && parent,stateno != 1250
trigger3 = time = 4 && ishelper(1203)
ignorehitpause = 1
;persistent = 

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 1202]
type = A
movetype = A
physics = N
ctrl=0
anim=187
sprpriority=-4
;velset=0 - (3 * ishelper(1204)),0

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(1204)
x = -3
;ignorehitpause = 
;persistent = 

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = 30

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 128 - (time * 15),256

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.9+time*0.09,0.9+time*0.3

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = parent,movetype = H
ignorehitpause = 1

;---------------------------------------------------------------------------
; Aerial Witch Ley Line
[Statedef 1250]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 1200
facep2 = 1  
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 1200
value = , NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, VelSet]
type = Velset
trigger1 = time > 13
trigger1 = vel x <= 0
x = 15
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = Velset
trigger1 = animelem = 4
x = 15
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelMul
trigger1 = time > 48
x = 0.75
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 13
physics = A         ;A,C,S,N

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s2600, 1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s2600, 2

[State 240, 2]
type = HitDef
triggerall = hitcount = 0
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -14, -2.5;0 - ((p2dist y > 0) * 2.5) + ((p2dist y < 0) * 2.5)
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -14,-2.5;0 - ((p2dist y > 0) * 1.2) + ((p2dist y < 0) * 1.2) 
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-0.5
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

[State 240, 2]
type = HitDef
triggerall = hitcount = 1
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
trigger4 = animelem = 9
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,14
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -14, -2.5;0 - ((p2dist y > 0) * 2.5) + ((p2dist y < 0) * 2.5)
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -14,-2.5;0 - ((p2dist y > 0) * 1.2) + ((p2dist y < 0) * 1.2)
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-0.5
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

[State 240, 2]
type = HitDef
triggerall = hitcount = 2
trigger1 = animelem = 8
trigger2 = animelem = 9
trigger3 = animelem = 10
trigger4 = animelem = 11
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,14
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -14, -2.5;0 - ((p2dist y > 0) * 2.5) + ((p2dist y < 0) * 2.5)
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -14,-2.5;0 - ((p2dist y > 0) * 1.2) + ((p2dist y < 0) * 1.2)
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-0.5
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

[State 240, 2]
type = HitDef
triggerall = hitcount = 3
trigger1 = animelem = 10
trigger2 = animelem = 11
trigger3 = animelem = 12
trigger4 = animelem = 13
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,14
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -14, -2.5;0 - ((p2dist y > 0) * 2.5) + ((p2dist y < 0) * 2.5)
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -14,-2.5;0 - ((p2dist y > 0) * 1.2) + ((p2dist y < 0) * 1.2)
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-0.5
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

[State 240, 2]
type = HitDef
triggerall = hitcount = 4
trigger1 = animelem = 12
trigger2 = animelem = 13
attr = A, SA
animtype  = Up
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,14
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -2.5, -6
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -2.5,-6 
;-------------------      
guard.hittime = 17
guard.slidetime = 17
Guard.Velocity    = -7.5         
airguard.velocity = -2.5,-1.2
airguard.hittime    = 19 
;-------------------   
fall.recover = 0
fall = 1
getpower = 25
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 0

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 1201
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1210
facing = 1
persistent = 0

[State 600]
Type = Helper
triggerall = numhelper(1201) = 0
trigger1 = animelem = 4
StateNo = 1201
ID = 1201
Name = "Broom Effect"
Pos = -44,-9
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 2.0
Size.YScale = 1.4

[State 600]
Type = Helper
trigger1 = numhelper(1201) != 0
trigger1 = numhelper(1202) = 0
StateNo = 1202
ID = 1202
Name = "Ring Effect"
Pos = 40,-30
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.9
Size.YScale = 0.9

[State 600]
Type = Helper
trigger1 = animelem = 14
StateNo = 1201
ID = 1203
Name = "Broom Effect"
Pos = -95,-2
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.0
Size.YScale = 2.1

[State 600]
Type = Helper
trigger1 = animelem = 14
StateNo = 1202
ID = 1204
Name = "Ring Effect"
Pos = 0,-30
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.35
Size.YScale = 1.35

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 702
scale = 1.0, 1.0
postype = p1
pos = 3, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 2
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.96

;[State 0, VelSet]
;type = VelSet
;Trigger1 = Pos Y >= 0
;x = 0
;y = 0

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 0, Width]
type = Width
trigger1 = time > 13
edge = 40,0
player = 0,0
ignorehitpause = 1

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Sweep Aside - Ground Forward
[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 1300
facep2 = 1  
sprpriority = 2

[State 40, 2]
type = NotHitBy
trigger1 = animelemtime(4) >= 0 && animelemtime(10) <= 4
value = ,NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, VelSet]
type = Velset
trigger1 = animelem = 4
x = 7

[State 0, VelSet]
type = VelMul
trigger1 = time > 39
x = 0.9

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s1300, 1

[State 240, 2]
type = HitDef
triggerall = hitcount < 5
trigger1 = time = [16,40]
attr = S, SA
animtype  = Heavy
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,16
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -2.5
;-------------------   
air.hittime  = 19
air.type = High                 
air.velocity = -2.5,-1
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -7.5        
airguard.velocity = -2.5,-1
airguard.hittime    = 19 
;-------------------    
fall.recover = 0
fall = 0 + ((enemy,statetype = A) * 1)
getpower = 20
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 4

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 15
value = s210, 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 16
attr = S, SA
animtype  = Heavy
damage    = 50, 5
guardflag = MA
pausetime = 7,7
priority = 9
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20        
ground.velocity = -9, -3
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -9,-3 
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -12         
airguard.velocity = -9,-3
airguard.hittime    = 20 
;-------------------   
ground.cornerpush.veloff = -17; - fvar(5)
air.cornerpush.veloff = -17; - fvar(5);
guard.cornerpush.veloff = -17;-7;
airguard.cornerpush.veloff = -17
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 25-(12*(fvar(2) != 1)),6
id = 14000


[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit = 1
trigger1 = var(20) = 0
Value = 10040
ID = 14000
IgnoreHitPause = 1
Persistent = 1

[State 77000]
type = explod
trigger1 = animelem = 15
anim = 251
scale = 0.61, 0.47
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 251
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 2
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 7
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 26, -68
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.15

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 16, -58
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.2

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 6, -48
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 1.0
Size.YScale = 0.25

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = -4, -38
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.2

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = -14, -28
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.15

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 7
StateNo = 1302
ID = 1302
Name = "Whirly Winds"
Pos = 3, -50
PosType = p1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 2.0
Size.YScale = 1.0

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.96

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 1301]
type = A
movetype = A
physics = N
ctrl=0
anim=1302
sprpriority=5
velset=0,0

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
;time = 1
;facing = 0
pos = 10,-55
ignorehitpause = 1

[State 0, AngleDraw]
type = Angledraw
trigger1 = 1
value = -20
scale = 1 + time * 0.2, 1 + time * 0.2
ignorehitpause = 0
;persistent =

;[State 0, AngleDraw]
;type = AngleDraw
;trigger1 = 1
;value = 18
;scale = 1+time*0.1,1+time*0.1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-(time * 10),256
ignorehitpause = 0

[State 1011]
Type=NotHitBy
Trigger1=1
value=SAC
ignorehitpause = 1

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = parent,stateno != 1300 && parent,stateno != 1310 && parent,stateno != 1350 && parent,stateno != 1360

;---------------------------------------------------------------------------
[Statedef 1302]
type = A
movetype = A
physics = N
ctrl=0
anim=1303
sprpriority=5
velset=0,0

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
;time = 1
;facing = 0
pos = 5,-45
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -20

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State RemoveHelper]
type = Destroyself
trigger1 = animtime = 0
trigger2 = parent,stateno != 1300 && parent,stateno != 1310 && parent,stateno != 1350 && parent,stateno != 1360

;---------------------------------------------------------------------------
; Sweep Aside - Ground Up
[Statedef 1310]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 1300
facep2 = 1  
sprpriority = 2

[State 40, 2]
type = NotHitBy
trigger1 = animelemtime(4) >= 0 && animelemtime(10) <= 4
value = ,NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, VelSet]
type = Velset
trigger1 = animelem = 4
x = 4
y = -2

[State 0, VelSet]
type = VelMul
trigger1 = time > 39
x = 0.9

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 50
physics = A         ;A,C,S,N

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s1300, 1

[State 240, 2]
type = HitDef
triggerall = hitcount < 5
trigger1 = time = [16,40]
attr = A, SA
animtype  = Heavy
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,16
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -2.5
;-------------------   
air.hittime  = 19
air.type = High                 
air.velocity = -2.5,-2.5
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -7.5        
airguard.velocity = -2.5,-2.5
airguard.hittime    = 19 
;-------------------    
fall.recover = 0
fall = 0 + ((enemy,statetype = A) * 1)
getpower = 20
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 4

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 15
value = s210, 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 16
attr = A, SA
animtype  = Heavy
damage    = 50, 5
guardflag = MA
pausetime = 7,7
priority = 9
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20        
ground.velocity = -9, -3
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -9,-3 
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -12         
airguard.velocity = -9,-3
airguard.hittime    = 20 
;-------------------   
ground.cornerpush.veloff = -17; - fvar(5)
air.cornerpush.veloff = -17; - fvar(5);
guard.cornerpush.veloff = -17;-7;
airguard.cornerpush.veloff = -17
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 25-(12*(fvar(2) != 1)),6
id = 14000

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit = 1
trigger1 = var(20) = 0
Value = 10040
ID = 14000
IgnoreHitPause = 1
Persistent = 1

[State 77000]
type = explod
trigger1 = animelem = 15
anim = 251
scale = 0.61, 0.47
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 251
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 2
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 7
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 26, -68
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.15

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 16, -58
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.2

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 6, -48
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 1.0
Size.YScale = 0.25

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = -4, -38
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.2

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = -14, -28
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.15

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 7
StateNo = 1302
ID = 1302
Name = "Whirly Winds"
Pos = 3, -50
PosType = p1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 2.0
Size.YScale = 1.0

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.96

[State 240, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0

[State 605, ??]
Type = ChangeState
Value = 52
Trigger1 = Pos Y >= 5
Trigger1 = Vel Y >= 0

;---------------------------------------------------------------------------
; Sweep Aside - Air Forward
[Statedef 1350]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 1300
facep2 = 1  
sprpriority = 2

[State 40, 2]
type = NotHitBy
trigger1 = animelemtime(4) >= 0 && animelemtime(10) <= 4
value = ,NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, VelSet]
type = Velset
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = Velset
trigger1 = animelem = 4
x = 7

[State 0, VelSet]
type = VelMul
trigger1 = time > 39
x = 0.9

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 0, Gravity]
type = Gravity
trigger1 = time > 49
;ignorehitpause = 
;persistent = 

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s1300, 1

[State 240, 2]
type = HitDef
triggerall = hitcount < 5
trigger1 = time = [16,40]
attr = A, SA
animtype  = Heavy
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,16
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -2.5
;-------------------   
air.hittime  = 19
air.type = High                 
air.velocity = -2.5,-1
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -7.5        
airguard.velocity = -2.5,-1
airguard.hittime    = 19 
;-------------------    
fall.recover = 0
fall = 0 + ((enemy,statetype = A) * 1)
getpower = 20
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 4

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 15
value = s210, 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 16
attr = A, SA
animtype  = Heavy
damage    = 50, 5
guardflag = MA
pausetime = 7,7
priority = 9
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20        
ground.velocity = -9, -3
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -9,-3 
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -12         
airguard.velocity = -9,-3
airguard.hittime    = 20 
;-------------------   
ground.cornerpush.veloff = -17; - fvar(5)
air.cornerpush.veloff = -17; - fvar(5);
guard.cornerpush.veloff = -17;-7;
airguard.cornerpush.veloff = -17
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 25-(12*(fvar(2) != 1)),6
id = 14000

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit = 1
trigger1 = var(20) = 0
Value = 10040
ID = 14000
IgnoreHitPause = 1
Persistent = 1

[State 77000]
type = explod
trigger1 = animelem = 15
anim = 251
scale = 0.61, 0.47
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 251
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 2
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 7
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 26, -68
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.15

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 16, -58
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.2

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 6, -48
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 1.0
Size.YScale = 0.25

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = -4, -38
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.2

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = -14, -28
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.15

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 7
StateNo = 1302
ID = 1302
Name = "Whirly Winds"
Pos = 3, -50
PosType = p1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 2.0
Size.YScale = 1.0

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.96

[State 0, VelSet]
type = VelSet
Trigger1 = Pos Y >= 0
y = 0

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Sweep Aside - Air Down
[Statedef 1360]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 1300
facep2 = 1  
sprpriority = 2

[State 40, 2]
type = NotHitBy
trigger1 = animelemtime(4) >= 0 && animelemtime(10) <= 4
value = ,NT, AT, ST, HT, NP, AP, SP, HP
ignorehitpause = 1

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, VelSet]
type = Velset
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = Velset
trigger1 = animelem = 4
x = 4
y = 2

[State 0, VelSet]
type = VelMul
trigger1 = time > 39
x = 0.9

;[State 0, StateTypeSet]
;type = StateTypeSet
;triggerall = statetype != S
;trigger1 = time = 50
;physics = A         ;A,C,S,N

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = s1300, 1

[State 240, 2]
type = HitDef
triggerall = hitcount < 5
trigger1 = time = [16,40]
attr = A, SA
animtype  = Heavy
damage    = 20, 2
guardflag = MA
priority = 9, Hit 
pausetime = 4,4
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,16
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -2.5
;-------------------   
air.hittime  = 19
air.type = High                 
air.velocity = -2.5,1
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -7.5        
airguard.velocity = -2.5,1
airguard.hittime    = 19 
;-------------------    
fall.recover = 0
fall = 0 + ((enemy,statetype = A) * 1)
getpower = 20
givepower = 10-(5*(fvar(2) != 1)),2
persistent = 4

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 15
value = s210, 0

[State 240, 2]
type = HitDef
trigger1 = animelem = 16
attr = A, SA
animtype  = Heavy
damage    = 50, 5
guardflag = MA
pausetime = 7,7
priority = 9
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,13
guardsound = s500, 0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20        
ground.velocity = -9, -3
;-------------------   
air.hittime  = 18 
air.type = High                 
air.velocity = -9,-3 
;-------------------      
guard.hittime = 18 
guard.slidetime = 18
Guard.Velocity    = -12         
airguard.velocity = -9,-3
airguard.hittime    = 20 
;-------------------   
ground.cornerpush.veloff = -17; - fvar(5)
air.cornerpush.veloff = -17; - fvar(5);
guard.cornerpush.veloff = -17;-7;
airguard.cornerpush.veloff = -17
;-------------------   
fall.recover = 0
fall = 1
getpower = 88
givepower = 25-(12*(fvar(2) != 1)),6
id = 14000

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit = 1
trigger1 = var(20) = 0
Value = 10040
ID = 14000
IgnoreHitPause = 1
Persistent = 1

[State 77000]
type = explod
trigger1 = animelem = 15
anim = 251
scale = 0.61, 0.47
pos = 0, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 251
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 2
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 2
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = 4, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 7
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 26, -68
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.15

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 16, -58
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.2

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = 6, -48
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 1.0
Size.YScale = 0.25

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = -4, -38
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.8
Size.YScale = 0.2

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 8
StateNo = 1301
ID = 1301
Name = "Effect Ring"
Pos = -14, -28
PosType = P1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.15

[State 600]
Type = Helper
Trigger1 = animelem = 4
Trigger2 = animelem = 7
StateNo = 1302
ID = 1302
Name = "Whirly Winds"
Pos = 3, -50
PosType = p1
Ownpal = 1
IgnoreHitPause = 0
Persistent = 1
Size.XScale = 2.0
Size.YScale = 1.0

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.96

[State 0, VelSet]
type = VelSet
Trigger1 = Pos Y >= 0
y = 0

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
; Rising Sweep
[Statedef 1400]
type    = A
movetype= A
physics = N
juggle  = 5
ctrl = 0
anim = 1400 
sprpriority = 2

[State 40, 2]
type = NotHitBy
trigger1 = animelemtime(1) >= 0 && animelemtime(6) <= 5
value = SCA, AT
ignorehitpause = 1

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, Turn]
type = Turn
trigger1 = animelem = 4
trigger1 = p2dist x < -10

[State 0, VelSet]
type = Velset
trigger1 = !time
x = 0
y = 0

[State 0, VelSet]
type = Velset
trigger1 = animelem = 4
x = 10

[State 0, VelSet]
type = Velset
trigger1 = animelem = 5
x = 0
y = -11

[State 0, VelSet]
type = Velmul
trigger1 = time = [22,32]
y = 0.8

[State 0, VelSet]
type = Velset
trigger1 = anim = 1401
x = 0
y = 0

[State 0, VelSet]
type = posset
trigger1 = anim = 1401
trigger1 = pos y != 0
y = 0

[State 0, Gravity]
type = statetypeset
trigger1 = time = 32
physics = A

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 3
value = s8100, 0

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 5
value = s8100, 1

[State 240, 2]
type = HitDef
triggerall = hitcount < 8
trigger1 = time = [13,25]
attr = A, SA
animtype  = Heavy
damage    = 20, 2
guardflag = M
priority = 99, Hit 
pausetime = 2,2
sparkno = -1
sparkxy = 2, -43 
hitsound   = s100,2
guardsound = s500, 0
ground.type = High
ground.slidetime = 19
ground.hittime  = 19        
ground.velocity = -1, -9
;-------------------   
air.hittime  = 19 
air.type = High                 
air.velocity = -1,-9
;-------------------      
guard.hittime = 17 
guard.slidetime = 17
Guard.Velocity    = -10         
airguard.velocity = -2,-8
airguard.hittime    = 19 
;-------------------   
;ground.cornerpush.veloff = -15; - fvar(5)
;air.cornerpush.veloff = -15; - fvar(5);
guard.cornerpush.veloff = -15;-7;
airguard.cornerpush.veloff = -15
;-------------------   
fall.recover = 0
fall = 1
getpower = 15
givepower = 7-(3*(fvar(2) != 1)),1
persistent = 1

[State 77000]
type = explod
trigger1 = animelem = 3
anim = 1402
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1402
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 1405
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 3
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1410
facing = 1
persistent = 0

[State 600]
Type = Helper
trigger1 = animelem = 5
StateNo = 1401
ID = 1401
Name = "Broom Effect"
Pos = 58,-22
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.9
Size.YScale = 0.7

[State 600]
Type = Helper
trigger1 = animelem = 5
StateNo = 1401
ID = 1402
Name = "Broom Effect"
Pos = 58,-52
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.9
Size.YScale = 0.7

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 2

[State 77000]
type = explod
trigger1 = movehit = 1 
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 2

[State 77000]
type = explod
trigger1 = movehit = 1 
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent =2

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.96

[State 605, ??]
Type = Changeanim
triggerall = anim = 1400
triggerall = time > 30
Trigger1 = Pos Y >= 0
Value = 52

;---------------------------------------------------------------------------
[Statedef 1401]
type = A
movetype = A
physics = N
ctrl=0
anim=1403+(ishelper(1402)*1)
sprpriority=5-(ishelper(1402)*1)
velset=0,0

[State 0, BindToParent]
type = BindToParent
triggerall = ishelper(1401)
trigger1 = 1
;time = 1
;facing = 0
pos = 58,-22
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
triggerall = ishelper(1402)
trigger1 = 1
;time = 1
;facing = 0
pos = 58,-52
ignorehitpause = 1

[State 0, AngleDraw]
type = Angledraw
trigger1 = 1
scale = 1 - var(0) * 0.2, 1 + (ishelper(1402)*((var(1)) * 0.1))
ignorehitpause = 0
;persistent =

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = 0

[State 0, VarSet]
type = Varadd
trigger1 = parent,animelemtime(7) >= 0
var(0) = 1
ignorehitpause = 0

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1) = 0

[State 0, VarSet]
type = Varadd
trigger1 = ishelper(1402)
trigger1 = time = [0,12]
var(1) = 1
ignorehitpause = 0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent,animelem = 9
trigger2 = parent,stateno != 1400
ignorehitpause = 0

;---------------------------------------------------------------------------
;Meteor Bullet - Forward
[Statedef 1500]
Type     = A
MoveType = I
Physics  = S
Anim     = 1500
Ctrl     = 0
Facep2   = 1
poweradd = 100

[State 301, VarAdd]
Type = VarAdd
trigger1 = anim = 1500 && animelem = 1
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = anim = 1500 && animelem = 1
var(42) = 60

[State 600]
Type = ChangeAnim
triggerall = anim = 1500 && animelemtime(4)>=0
Trigger1 = var(59) = 0
Trigger1 = command != "hold_a"
trigger2 = var(54) = 150
Value = 1501

[State 77002, AI]
type = ChangeAnim
triggerall = var(59) = 1
triggerall = anim = 1500 && animelemtime(4)>=0
trigger1 = 1
;trigger1 = inguarddist
;trigger1 = p2statetype != L
;trigger2 = p2bodydist x <= 100
;trigger2 = p2statetype != L
;trigger3 = (RoundState != 2)
;trigger4 = enemy,stateno = [77000, 77003]
;trigger5 = enemynear,numproj >= 1
;trigger5 = inguarddist
Value = 1501

[State 77002, AI]
type = Changestate
triggerall = var(59) = 1
triggerall = anim = 1500 && animelemtime(4)>=0
triggerall = var(54) < 120
trigger1 = p2bodydist x >= 200
trigger1 = p2movetype = A
trigger2 = enemynear,numproj >= 1
trigger2 = inguarddist
Value = 120

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(54) < 150
triggerall = anim = 1501
trigger1 = animelem = 1
value = S3200,0

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(54) >= 150
triggerall = anim = 1501
trigger1 = animelem = 1
value = S3200,1

[State 0, Turn]
type = Turn
triggerall = anim = 1501
trigger1 = animelem = 1 && p2bodydist x < -30

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1501 && animelem = 1 
x = -4
y = -3

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1501 && animelem = 2
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause = 
;persistent = 

[State 4080]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) < 150
Trigger1 = animelem = 1
StateNo = 1501
ID = 1501
Name = "Bullet"
Pos = 42, -65
PosType = P1
Ownpal = 1
facing = 1
IgnoreHitPause = 1
Size.XScale = 1.1
Size.YScale = 0.65

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1504
ID = 1509
Name = "Light"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.5
Size.YScale = 3.5

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1507
ID = 1507
Name = "Ring"
Pos = 62, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.22
Size.YScale = 1.06

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1507
ID = 1508
Name = "Ring"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.275
Size.YScale = 1.325

[State 600]
Type = Helper
triggerall = anim = 1500
trigger1 = var(54) = 10
StateNo = 1508
ID = 1510
Name = "Charge Light"
Pos = 47, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.15
Size.YScale = 0.15

[State 600]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) = 150
Trigger1 = animelem = 1
StateNo = 1521
ID = 1521
Name = "Empovered Bullet"
Pos = 12, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.65
Size.YScale = 0.975

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(54) = 65
trigger2 = var(54) = 115
trigger3 = var(54) = 15
value = S16000,1

[State 0, VarSet]
type = VarSet
trigger1 = !time 
var(54) = 0

[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1500 && animelemtime(4)>=0
triggerall = var(54) < 150
trigger1 = time
var(54) = 1

[State 600]
Type = Helper
Trigger1 = time%2
StateNo = 1506
ID = 1506
Name = "Flying Things"
postype = p1
pos = 47, -65
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.1
Size.YScale = 0.1

;[State 0, PlaySnd]
;type = PlaySnd
;Trigger1 = var(54) = 30
;trigger2 = var(54) = 60
;Trigger3 = var(54) = 90
;trigger4 = var(54) = 120
;value = S11000,2

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1501 && animelemtime(2)>=0
Trigger1 = Pos Y >= 0
trigger2 = anim = 1500
Trigger2 = Pos Y >= 0
x = 0
y = 0

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = anim = 1501 && animtime = 0 
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 1501 && animtime = 0 
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 1501]
type = A
movetype = A
physics = N
ctrl=0
anim=1502
sprpriority=4

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = !time
;value = S1300,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1
 
[State 0, VelSet]
type = VelSet
triggerall = ishelper(1501)
trigger1 = time = [0,15]
x = 0 + ((time) * 0.66)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1501)
trigger1 = time > 15
x = 10
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1511)
trigger1 = time = [0,15]
x = 0 + ((time) * 0.6)
y = 0 - ((time) * 0.3)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1511)
trigger1 = time > 15
x = 9
y = -4.5
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1561)
trigger1 = time = [0,15]
x = 0 + ((time) * 0.6)
y = 0 + ((time) * 0.3)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1561)
trigger1 = time > 15
x = 9
y = 4.5
ignorehitpause = 1

[State 0, AngleDraw]
Type = AngleDraw
triggerall = ishelper(1511) || ishelper(1561)
Trigger1 = (Vel X)
Value = ATan(Vel Y/Vel X)*(-180.0/Pi)+((Vel X<0)*180)

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State Hitdef]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = A, SP
damage = floor((100*(3*(palno = 12)))+100*root,fvar(3)),10
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,5
guard.pausetime = 0,5
sparkno = -1
sparkxy = 0,0
hitsound = S100,18
guardsound = s500, 0 
ground.type = High
air.type = High
ground.hittime  = 20
guard.hittime= 20
ground.velocity = -9, -1.5
guard.velocity=-12
guard.slidetime = 12
air.velocity = -9, -1.5
airguard.velocity= -9, -1.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
Persistent        = 2
fall = 1
fall.recover = 0
givepower = 0
getpower = 0
id = 14000

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit = 1
trigger1 = root,var(20) = 0
Value = 10040
ID = 14000
IgnoreHitPause = 1
Persistent = 1

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 1504
scale = 0.89, 0.89
postype = p1
pos = 75, 0
sprpriority = 8
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6399
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%4
scale = 1.25, 1.25
postype = p2
pos = 0, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6006
scale = 1.0, 1.0
postype = p2
pos = 0, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6005
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6101
ID = 6101
Name = "Effect Ring"
pos = 0, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

[State 4080]
Type = Helper
Trigger1 = !time
StateNo = 1502
ID = 1502
Name = "Bullet"
Pos = 35, 0
PosType = P1
Ownpal = 1
facing = 1
IgnoreHitPause = 1
Size.XScale = 1.45
Size.YScale = 0.9

[State 0, VarSet]
type = parentVarSet
trigger1 = movehit = 1
fvar(2) = parent,fvar(2)*0.82

[State 0, destroyself]
type = Destroyself
trigger1 = movehit
trigger2 = moveguarded
trigger3 = movereversed
trigger4 = frontedgedist<-75
trigger5 = backedgedist<-75
trigger6 = time = 120

;---------------------------------------------------------------------------
[Statedef 1502]
type = A
movetype = A
physics = N
ctrl=0
anim=1503
sprpriority=3

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = !time
;value = S1300,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = (Vel X)
Value = ATan(Vel Y/Vel X)*(-180.0/Pi)+((Vel X<0)*180)
 
[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1501)
trigger1 = time = [0,15]
x = 0 + ((time) * 0.66)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1501)
trigger1 = time > 15
x = 10
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1511)
trigger1 = time = [0,15]
x = 0 + ((time) * 0.6)
y = 0 - ((time) * 0.3)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1511)
trigger1 = time > 15
x = 9
y = -4.5
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1561)
trigger1 = time = [0,15]
x = 0 + ((time) * 0.6)
y = 0 + ((time) * 0.3)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1561)
trigger1 = time > 15
x = 9
y = 4.5
ignorehitpause = 1

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State 0, destroyself]
type = Destroyself
trigger1 = parent,movehit
trigger2 = parent,moveguarded
trigger3 = parent, movereversed
trigger4 = parent,frontedgedist<-75
trigger5 = parent,backedgedist<-75
trigger6 = time = 120


;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 1504]
type = A
movetype = A
physics = N
ctrl=0
anim=1004
sprpriority=3
velset=8,0

[State 0, AngleSet]
type = Angledraw
trigger1 = 1
scale = 1 + time * 0.1,1 - time * 0.1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (time * 30),256

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 1505]
type = A
movetype = A
physics = N
ctrl=0
anim=1005
sprpriority=2
;velset=0 - (3 * ishelper(1204)),0

[State 0, AngleSet]
type = Angledraw
trigger1 = 1
value = 270
scale = 1,1 + time * 0.08

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (time *50),256

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;--------------------------------------------------------------------------
[Statedef 1506]
Physics = N
MoveType = I
Anim    = 1506
sprpriority = 4

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, VelSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = (Vel X)
Value = var(0)

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type = VelSet
triggerall = time<15
trigger1 = !time
x = floor(sin(random%360)*4)
y = floor(cos(random%360)*4)

[State 0, VelSet]
type = VelSet
trigger1 = time>14
x = -vel x
y = -vel y
persistent = 0

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = parent,anim != 1500

;--------------------------------------------------------------------------
[Statedef 1507]
Physics = N
MoveType = I
Anim    = 402
sprpriority = 7

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256,256

[State 0, VelSet]
type = VarSet
triggerall = parent,stateno = 1510
trigger1 = !time
var(0) = 32

[State 0, VelSet]
type = VarSet
triggerall = parent,stateno = 1560
triggerall = parent,pos y <= -4
trigger1 = !time
var(0) = -32

[State 0, VelSet]
type = VelSet
triggerall = parent,stateno = 4000
trigger1 = !time
x = -5

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = var(0)

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0

;---------------------------------------------------------------------------
[Statedef 1508]
type = A
MoveType = I
physics = N
ctrl=0
anim=1004
sprpriority=7
velset=0,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add 

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, AngleSet]
type = AngleDraw
trigger1 = 1
value = 1 + (time * 8)
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1+(var(51)*0.08),1+(var(51)*0.08)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(51) = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = parent,var(54) = [60,70]
trigger2 = parent,var(54) = [110,120]
trigger3 = parent,var(54) = [10,20]
var(51) = 1

[State RemoveHelper]
type = DestroySelf
trigger1 = parent,anim = 1501
trigger1 = parent,var(54) < 150
trigger2 = parent,movetype = H
trigger3 = parent,anim = 1501 && parent,animelemtime(2) >= 0
trigger3 = parent,var(54) >= 150

;---------------------------------------------------------------------------
;Meteor Bullet - Up
[Statedef 1510]
Type     = A
MoveType = I
Physics  = S
Anim     = 1500
Ctrl     = 0
Facep2   = 1
poweradd = 100

[State 301, VarAdd]
Type = VarAdd
trigger1 = anim = 1500 && animelem = 1
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = anim = 1500 && animelem = 1
var(42) = 60

[State 600]
Type = ChangeAnim
triggerall = anim = 1500 && animelemtime(4)>=0
Trigger1 = var(59) = 0
Trigger1 = command != "hold_a"
trigger2 = var(54) = 150
Value = 1501

[State 77002, AI]
type = ChangeAnim
triggerall = var(59) = 1
triggerall = anim = 1500 && animelemtime(4)>=0
trigger1 = 1
;trigger1 = inguarddist
;trigger1 = p2statetype != L
;trigger2 = p2bodydist x <= 100
;trigger2 = p2statetype != L
;trigger3 = (RoundState != 2)
;trigger4 = enemy,stateno = [77000, 77003]
;trigger5 = enemynear,numproj >= 1
;trigger5 = inguarddist
Value = 1501

[State 77002, AI]
type = Changestate
triggerall = var(59) = 1
triggerall = anim = 1500 && animelemtime(4)>=0
triggerall = var(54) < 120
trigger1 = p2bodydist x >= 200
trigger1 = p2movetype = A
trigger2 = enemynear,numproj >= 1
trigger2 = inguarddist
Value = 120

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(54) < 150
triggerall = anim = 1501
trigger1 = animelem = 1
value = S3200,0

[State 0, PlaySnd]
type = PlaySnd
triggerall = var(54) >= 150
triggerall = anim = 1501
trigger1 = animelem = 1
value = S3200,1

[State 0, Turn]
type = Turn
triggerall = anim = 1501
trigger1 = animelem = 1 && p2bodydist x < -30

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1501 && animelem = 1 
x = -4
y = -3

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1501 && animelem = 2
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
;ignorehitpause = 
;persistent = 

[State 4080]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) < 150
Trigger1 = animelem = 1
StateNo = 1501
ID = 1511
Name = "Bullet"
Pos = 42, -65
PosType = P1
Ownpal = 1
facing = 1
IgnoreHitPause = 1
Size.XScale = 1.1
Size.YScale = 0.65

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1504
ID = 1509
Name = "Light"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.5
Size.YScale = 3.5

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1507
ID = 1507
Name = "Ring"
Pos = 62, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.22
Size.YScale = 1.06

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1507
ID = 1508
Name = "Ring"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.275
Size.YScale = 1.325

[State 600]
Type = Helper
triggerall = anim = 1500
trigger1 = var(54) = 10
StateNo = 1508
ID = 1510
Name = "Charge Light"
Pos = 47, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.15
Size.YScale = 0.15

[State 600]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) = 150
Trigger1 = animelem = 1
StateNo = 1521
ID = 1522
Name = "Empovered Bullet"
Pos = 12, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.65
Size.YScale = 0.975

[State 0, PlaySnd]
type = PlaySnd
trigger1 = var(54) = 65
trigger2 = var(54) = 115
trigger3 = var(54) = 15
value = S16000,1

[State 0, VarSet]
type = VarSet
trigger1 = !time 
var(54) = 0

[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1500 && animelemtime(4)>=0
triggerall = var(54) < 150
trigger1 = time
var(54) = 1

[State 600]
Type = Helper
Trigger1 = time%2
StateNo = 1506
ID = 1506
Name = "Flying Things"
postype = p1
pos = 47, -65
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.1
Size.YScale = 0.1

;[State 0, PlaySnd]
;type = PlaySnd
;Trigger1 = var(54) = 30
;trigger2 = var(54) = 60
;Trigger3 = var(54) = 90
;trigger4 = var(54) = 120
;value = S11000,2

[State 0, VelSet]
type = VelSet
Trigger1 = !time
Trigger1 = Pos Y >= 0
y = 0

[State 0, PosSet]
type = PosSet
Trigger1 = !time
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 1501 && animtime = 0 
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 1521]
type = A
movetype = A
physics = N
ctrl=0
anim=1505
sprpriority=4

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = !time
;value = S1300,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1
 
[State 0, VelSet]
type = VelSet
triggerall = ishelper(1521)
trigger1 = time = [0,30]
trigger1 = !movecontact || movecontact > 9
x = 0 + ((time) * 0.33) 
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1521)
trigger1 = time > 30
trigger1 = !movecontact || movecontact > 9
x = 10 
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1522)
trigger1 = time = [0,30]
trigger1 = !movecontact || movecontact > 9
x = (0 + ((time) * 0.3)) 
y = (0 - ((time) * 0.15)) 
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = ishelper(1522)
trigger1 = time > 30
trigger1 = !movecontact || movecontact > 9
x = 9 
y = -4.5 
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = movecontact = [1,9]
x = 0.90
y = 0.90

[State 0, AngleDraw]
Type = AngleDraw
triggerall = ishelper(1522)
Trigger1 = (Vel X)
Value = ATan(Vel Y/Vel X)*(-180.0/Pi)+((Vel X<0)*180)
ignorehitpause = 1

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = 0  

[State 0, VarSet]
type = Varadd
trigger1 = moveguarded = 1
var(0) = 1  

[State Hitdef]
type = HitDef
triggerall = vel x > 1
Trigger1          = HitCount < 7
Trigger1 = Moveguarded !=[1,2]
attr = A, SP
damage = floor((10*(3*(palno = 12)))+10*root,fvar(3)),3
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 1,5
guard.pausetime = 0,5
sparkno = -1
sparkxy = 0,0
hitsound = S100,18
guardsound = s500, 0 
ground.type = High
air.type = High
ground.hittime  = 20
guard.hittime= 20
ground.velocity = -1, -1
guard.velocity=-12
guard.slidetime = 12
air.velocity = -1, -1
airguard.velocity= -9, -1.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
Persistent        = 2
fall = 1
fall.recover = 0
givepower = 0
getpower = 0

[State Hitdef]
type = HitDef
triggerall = vel x > 1
Trigger1          = HitCount = 7
Trigger1 = Moveguarded !=[1,2]
trigger2 = var(0) = 7
attr = A, SP
damage = floor((130*(3*(palno = 12)))+130*root,fvar(3)),40
animtype = Medium
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,5
guard.pausetime = 0,5
sparkno = -1
sparkxy = 0,0
hitsound = S100,18
guardsound = S100,18
ground.type = High
air.type = High
ground.hittime  = 20
guard.hittime= 20
ground.velocity = -9, -1.5
guard.velocity=-12
guard.slidetime = 12
air.velocity = -9, -1.5
airguard.velocity= -9, -1.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
Persistent        = 1
fall = 1
fall.recover = 0
givepower = 0
getpower = 0
id = 14000

[State 201]
Type = TargetState
Trigger1 = NumTarget
trigger1 = movehit = 1
trigger1 = root,var(20) = 0
Value = 10040
ID = 14000
IgnoreHitPause = 1
Persistent = 1

[State 77000]
type = explod
trigger1 = hitcount = 7
trigger1 = movehit = 1
trigger2 = var(0) = 8
trigger2 = moveguarded
anim = 1504
scale = 1.25, 1.25
postype = p1
pos = 75, 0
sprpriority = 8
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6399
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%4
scale = 1.25, 1.25
postype = p2
pos = 0, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6006
scale = 1.0, 1.0
postype = p2
pos = 0, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6005
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6101
ID = 6101
Name = "Effect Ring"
pos = 0, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

[State 4080]
Type = Helper
Trigger1 = !time
StateNo = 1522
ID = 1532
Name = "Bullet"
Pos = 35, 0
PosType = P1
Ownpal = 1
facing = 1
IgnoreHitPause = 1
Size.XScale = 2.175
Size.YScale = 1.35

[State 600]
Type = Helper
triggerall = ishelper(1521)
trigger1 = time > 15
Trigger1 = time%2
StateNo = 1003
ID = 1525
Name = "Smaller Blast"
Pos = -10,-20 + random%40
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
triggerall = ishelper(1522)
trigger1 = time > 15
Trigger1 = time%2
StateNo = 1003
ID = 1526
Name = "Smaller Blast"
Pos = -10,-20 + random%40
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 0, destroyself]
type = Destroyself
trigger1 = hitcount > 7
trigger1 = movehit
trigger2 = moveguarded
trigger2 = var(0) = 8
trigger3 = movereversed
trigger3 = hitcount > 7
trigger4 = frontedgedist<-75
trigger5 = backedgedist<-75
trigger6 = time = 120

;---------------------------------------------------------------------------
[Statedef 1522]
type = A
movetype = A
physics = N
ctrl=0
anim=1503
sprpriority=3

;[State 0, PlaySnd]
;type = PlaySnd
;trigger1 = !time
;value = S1300,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = (Vel X)
Value = ATan(Vel Y/Vel X)*(-180.0/Pi)+((Vel X<0)*180)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1521)
trigger1 = time = [0,30]
trigger1 = !parent,movecontact || parent,movecontact > 9
x = 0 + ((time) * 0.33) 
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1521)
trigger1 = time > 30
trigger1 = !parent,movecontact || parent,movecontact > 9
x = 10 
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1522)
trigger1 = time = [0,30]
trigger1 = !parent,movecontact || parent,movecontact > 9
x = (0 + ((time) * 0.3)) 
y = (0 - ((time) * 0.15)) 
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = parent,ishelper(1522)
trigger1 = time > 30
trigger1 = !parent,movecontact || parent,movecontact > 9
x = 9 
y = -4.5 
ignorehitpause = 1

[State 0, VelMul]
type = VelMul
trigger1 = parent,movecontact = [1,9]
x = 0.90
y = 0.90

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State 0, destroyself]
type = Destroyself
trigger1 = parent,movehit
trigger1 = parent,hitcount > 7
trigger2 = parent,moveguarded
trigger2 = parent,var(0) = 8
trigger3 = parent, movereversed
trigger3 = parent,hitcount > 7
trigger4 = parent,frontedgedist<-75
trigger5 = parent,backedgedist<-75
trigger6 = time = 120

;---------------------------------------------------------------------------
;Aerial Meteor Bullet
[Statedef 1550]
Type     = A
MoveType = I
Physics  = N
Anim     = 1500
Ctrl     = 0
Facep2   = 1
poweradd = 100

[State 600]
Type = ChangeAnim
triggerall = anim = 1500 && animelemtime(4)>=0
trigger1 = 1
;Trigger1 = var(59) = 0
;Trigger1 = command != "hold_a"
;trigger2 = var(54) = 150
Value = 1501

[State 77002, AI]
type = ChangeAnim
triggerall = var(59) = 1
triggerall = anim = 1500 && animelemtime(4)>=0
trigger1 = 1
Value = 1501

[State 77002, AI]
type = Changestate
triggerall = var(59) = 1
triggerall = anim = 1500 && animelemtime(4)>=0
triggerall = var(54) < 120
trigger1 = p2bodydist x >= 200
trigger1 = p2movetype = A
trigger2 = enemynear,numproj >= 1
trigger2 = inguarddist
Value = 120

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1501
trigger1 = animelem = 1
value = S3200,0

[State 301, VarAdd]
Type = VarAdd
trigger1 = anim = 1500 && animelem = 1
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = anim = 1500 && animelem = 1
var(42) = 60

[State 0, Turn]
type = Turn
triggerall = anim = 1501
trigger1 = animelem = 1 && p2bodydist x < -30

[State 0, StateTypeSet]
type = gravity
trigger1 = anim = 1501 && animelemtime(2) >= 0 

[State 4080]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) < 150
Trigger1 = animelem = 1
StateNo = 1501
ID = 1501
Name = "Bullet"
Pos = 42, -65
PosType = P1
Ownpal = 1
facing = 1
IgnoreHitPause = 1
Size.XScale = 1.1
Size.YScale = 0.65

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1504
ID = 1509
Name = "Light"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.5
Size.YScale = 3.5

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1507
ID = 1507
Name = "Ring"
Pos = 62, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.22
Size.YScale = 1.06

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1507
ID = 1508
Name = "Ring"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.275
Size.YScale = 1.325

;[State 600]
;Type = Helper
;triggerall = anim != 1500
;Trigger1 = animelem = 1
;StateNo = 1505
;ID = 1510
;Name = "Light"
;Pos = 50, -65
;PosType = P1
;Ownpal = 1
;IgnoreHitPause = 1
;Persistent = 1
;Size.XScale = 0.9
;Size.YScale = 0.9

[State 600]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) = 150
Trigger1 = animelem = 1
StateNo = 1520
ID = 1549
Name = "Empovered Bullet"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.1
Size.YScale = 0.1

[State 0, VarSet]
type = VarSet
trigger1 = !time 
var(54) = 0

[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1500 && animelemtime(4)>=0
triggerall = var(54) < 150
trigger1 = time
var(54) = 1

[State 600]
Type = Helper
Trigger1 = time%2
StateNo = 1506
ID = 1506
Name = "Flying Things"
postype = p1
pos = 47, -65
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.1
Size.YScale = 0.1

;[State 0, PlaySnd]
;type = PlaySnd
;Trigger1 = var(54) = 30
;trigger2 = var(54) = 60
;Trigger3 = var(54) = 90
;trigger4 = var(54) = 120
;value = S11000,2

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1501 && animelemtime(2)>=0
Trigger1 = Pos Y >= 0
trigger2 = anim = 1500
Trigger2 = Pos Y >= 0
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1501 && animelem = 1 
x = -4
y = -3

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = anim = 1501 && animtime = 0 
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
trigger1 = anim = 1501 && animtime = 0 
ctrl = 1

;---------------------------------------------------------------------------
;Aerial Meteor Bullet - Down
[Statedef 1560]
Type     = A
MoveType = I
Physics  = N
Anim     = 1500
Ctrl     = 0
Facep2   = 1
poweradd = 100

[State 600]
Type = ChangeAnim
triggerall = anim = 1500 && animelemtime(4)>=0
trigger1 = 1
;Trigger1 = var(59) = 0
;Trigger1 = command != "hold_a"
;trigger2 = var(54) = 150
Value = 1501

[State 77002, AI]
type = ChangeAnim
triggerall = var(59) = 1
triggerall = anim = 1500 && animelemtime(4)>=0
trigger1 = 1
Value = 1501

[State 77002, AI]
type = Changestate
triggerall = var(59) = 1
triggerall = anim = 1500 && animelemtime(4)>=0
triggerall = var(54) < 120
trigger1 = p2bodydist x >= 200
trigger1 = p2movetype = A
trigger2 = enemynear,numproj >= 1
trigger2 = inguarddist
Value = 120

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 1501
trigger1 = animelem = 1
value = S3200,0

[State 301, VarAdd]
Type = VarAdd
trigger1 = anim = 1500 && animelem = 1
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = anim = 1500 && animelem = 1
var(42) = 60

[State 0, Turn]
type = Turn
triggerall = anim = 1501
trigger1 = animelem = 1 && p2bodydist x < -30

[State 0, StateTypeSet]
type = gravity
trigger1 = anim = 1501 && animelemtime(2) >= 0 

[State 4080]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) < 150
triggerall = pos y <= -1
Trigger1 = animelem = 1
StateNo = 1501
ID = 1561
Name = "Bullet"
Pos = 42, -65
PosType = P1
Ownpal = 1
facing = 1
IgnoreHitPause = 1
Size.XScale = 1.1
Size.YScale = 0.65

[State 4080]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) < 150
triggerall = pos y >= 0
Trigger1 = animelem = 1
StateNo = 1501
ID = 1501
Name = "Bullet"
Pos = 42, -65
PosType = P1
Ownpal = 1
facing = 1
IgnoreHitPause = 1
Size.XScale = 1.1
Size.YScale = 0.65

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1504
ID = 1509
Name = "Light"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.5
Size.YScale = 3.5

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1507
ID = 1507
Name = "Ring"
Pos = 62, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.22
Size.YScale = 1.06

[State 600]
Type = Helper
triggerall = anim != 1500
Trigger1 = animelem = 1
StateNo = 1507
ID = 1508
Name = "Ring"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.275
Size.YScale = 1.325

;[State 600]
;Type = Helper
;triggerall = anim != 1500
;Trigger1 = animelem = 1
;StateNo = 1505
;ID = 1510
;Name = "Light"
;Pos = 50, -65
;PosType = P1
;Ownpal = 1
;IgnoreHitPause = 1
;Persistent = 1
;Size.XScale = 0.9
;Size.YScale = 0.9

[State 600]
Type = Helper
triggerall = anim != 1500
triggerall = var(54) = 150
Trigger1 = animelem = 1
StateNo = 1520
ID = 1549
Name = "Empovered Bullet"
Pos = 42, -65
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.1
Size.YScale = 0.1

[State 0, VarSet]
type = VarSet
trigger1 = !time 
var(54) = 0

[State 0, VarAdd]
type = VarAdd
triggerall = anim = 1500 && animelemtime(4)>=0
triggerall = var(54) < 150
trigger1 = time
var(54) = 1

[State 600]
Type = Helper
Trigger1 = time%2
StateNo = 1506
ID = 1506
Name = "Flying Things"
postype = p1
pos = 47, -65
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.1
Size.YScale = 0.1

;[State 0, PlaySnd]
;type = PlaySnd
;Trigger1 = var(54) = 30
;trigger2 = var(54) = 60
;Trigger3 = var(54) = 90
;trigger4 = var(54) = 120
;value = S11000,2

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1501 && animelemtime(2)>=0
Trigger1 = Pos Y >= 0
trigger2 = anim = 1500
Trigger2 = Pos Y >= 0
x = 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = anim = 1501 && animelem = 1 
x = -4
y = -3

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = anim = 1501 && animtime = 0 
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
trigger1 = anim = 1501 && animtime = 0 
ctrl = 1

;---------------------------------------------------------------------------
;Explosive Potion - Into the Air
[Statedef 1600]
Type     = S
MoveType = A
Physics  = S
Anim     = 1600
Ctrl     = 0
Facep2   = 1
poweradd = 85

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, Turn]
type = Turn
trigger1 = animelem = 3 && p2bodydist x < -10

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1601, 3

[State 600]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 1601
ID = 1601
Name = "Potion"
Pos = 20,-75
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 600]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
ctrl=1

;--------------------------------------------------------------------------
[Statedef 1601]
type = A
movetype = I
physics = N
ctrl=0
anim=1601
sprpriority=4

[State 194, atan]
type = Velset
triggerall = ishelper(1601)
trigger1 = time = 1
x = 3.5
y = -9.4

[State 194, atan]
type = Veladd
triggerall = ishelper(1601)
trigger1 = time
y = 0.34

[State 194, atan]
type = Velset
triggerall = ishelper(1611)
trigger1 = time = 1
x = 3
y = -4.7

[State 194, atan]
type = Veladd
triggerall = ishelper(1611)
trigger1 = time
y = 0.21

[State 194, atan]
type = Velset
triggerall = ishelper(1621)
trigger1 = time = 1
x = 7.5
y = -7

[State 194, atan]
type = Veladd
triggerall = ishelper(1621)
triggerall = var(1) != 1
trigger1 = time
y = 0.33

[State 0, destroyself]
type = varset
triggerall = ishelper(1621)
trigger1 = !time
var(1) = 0

[State 0, destroyself]
type = varset
triggerall = ishelper(1621)
trigger1 = frontedgedist < 5
var(1) = 1

[State 210, 0]
type = velset
triggerall = var(1) = 1
trigger1 = frontedgedist < 10
x = -2.5
y = -7.8 + (time * 0.3) 

[State 1109, 7]
type = veladd
triggerall = var(1) = 1
trigger1 = Time = [0,25]
y = 0.05 + (time * 0.02)

[State 1109, 7]
type = veladd
triggerall = var(1) = 1
trigger1 = Time > 25
y = 0.55

[State 194, atan]
type = Velset
triggerall = ishelper(1651)
trigger1 = time = 1
x = 3.5
y = -4.7

[State 194, atan]
type = Veladd
triggerall = ishelper(1651)
trigger1 = time
y = 0.34

[State 194, atan]
type = Velset
trigger1 = time = 45
x = 0
y = 0

[State ]
Type = AngleDraw
Trigger1 = time < 45
Value = time * 10

[State ]
Type = AngleDraw
Trigger1 = time >= 45
scale = 1 + var(0) * 0.2,1 + var(0) * 0.2

[State 0, VarSet]
type = VarSet
trigger1 = !time 
var(0) = 0 

[State 0, VarSet]
type = Varadd
trigger1 = time >= 45
var(0) = 1

[State 0, Trans]
type = Trans
triggerall = time > 45
trigger1 = 1
trans = addalpha
alpha = 256 - ((time > 45) * (time - 45) * 50),256

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1602
ID = 1602
Name = "Other Effects"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1610
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1611
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1612
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1613
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1614
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1615
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1616
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1617
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1618
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1619
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1620
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 600]
Type = Helper
Trigger1 = time = 45
StateNo = 1603
ID = 1621
Name = "Stars"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.5
Size.YScale = 0.5

[State 240, 1]
type = PlaySnd
Trigger1 = time = 45
value = 1601, 1

[State 240, 1]
type = PlaySnd
Trigger1 = time = 45
value = 1601, 2

[State 0, destroyself]
type = Destroyself
trigger1 = animtime = 0

;--------------------------------------------------------------------------
[Statedef 1602]
type = A
movetype = A
physics = N
ctrl=0
anim=1602
sprpriority= 3

[State ]
Type = AngleDraw
Trigger1 = time 
scale = 1 + time * 0.25,1 + time * 0.25
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - time * 50,256
ignorehitpause = 1

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State Hitdef]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time > 1
attr = A,  SP
damage = floor((10*(3*(palno = 12)))+10*root,fvar(3)),1
animtype = Up
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,5
guard.pausetime = 0,0
sparkno = -1
sparkxy = 0,0 
hitsound = s100, 17                
guardsound = s500, 0   
ground.type = High
air.type = High
ground.hittime  = 20
guard.hittime= 20
ground.velocity = -1
guard.velocity= -5
guard.slidetime = 20
air.velocity = -1,-5
airguard.velocity=-5,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
givepower = 3-(2*(root,fvar(2) != 1)),1
fall = 0 + ((enemy,statetype = A) * 1)
fall.recover = 1
fall.recovertime = 30

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 6310+random%4
scale = 0.55, 0.55
postype = p1
pos = 0, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 6005
scale = 0.55, 0.55
postype = p1
pos = 0, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6005
facing = 1
persistent = 0

[State 0, VarSet]
type = parentVarSet
trigger1 = movehit = 1
fvar(2) = parent,fvar(2)*0.95

[State 0, destroyself]
type = Destroyself
trigger1 = animtime = 0

;--------------------------------------------------------------------------
[Statedef 1603]
type = A
movetype = A
physics = N
ctrl=0
anim=1603
sprpriority=4

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add
ignorehitpause = 1

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1610)
X        = Cos(30*Pi/180)*-3
Y        = Sin(30*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1611)
X        = Cos(60*Pi/180)*-3
Y        = Sin(60*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1612)
X        = Cos(90*Pi/180)*-3
Y        = Sin(90*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1613)
X        = Cos(120*Pi/180)*-3
Y        = Sin(120*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1614)
X        = Cos(150*Pi/180)*-3
Y        = Sin(150*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1615)
X        = Cos(180*Pi/180)*-3
Y        = Sin(180*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1616)
X        = Cos(210*Pi/180)*-3
Y        = Sin(210*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1617)
X        = Cos(240*Pi/180)*-3
Y        = Sin(240*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1618)
X        = Cos(270*Pi/180)*-3
Y        = Sin(270*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1619)
X        = Cos(300*Pi/180)*-3
Y        = Sin(300*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1620)
X        = Cos(330*Pi/180)*-3
Y        = Sin(330*Pi/180)*-3

[State -1]
Type     = VelSet
Trigger1 = IsHelper(1621)
X        = Cos(360*Pi/180)*-3
Y        = Sin(360*Pi/180)*-3

[State ]
Type = AngleDraw
Trigger1 = 1
Value = var(0) + time * 8
scale = 1 - (var(1) * 0.066),1 - (var(1) * 0.066)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
;trigger1 = movecontact
trigger1 = time > 30
x = 0
y = 2

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1) = 0

[State 0, VarSet]
type = Varadd
trigger1 = movecontact
trigger2 = time > 30
var(1) = 1

[State Hitdef]
type = HitDef
triggerall = var(1) = 0
triggerall = !movecontact && !movereversed
trigger1=time
attr = A,  SP
damage = floor((10*(3*(palno = 12)))+10*root,fvar(3)),1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,5
guard.pausetime = 0,0
sparkno = -1
sparkxy = 0,0 
hitsound = s100, 17                
guardsound = s500, 0   
ground.type = High
air.type = High
ground.hittime  = 20
guard.hittime= 20
ground.velocity = -5 +(4*(enemy,statetype = A)),0 - (1*(enemy,statetype = A))
guard.velocity= -5
guard.slidetime = 20
air.velocity =-1,-1
airguard.velocity=-5,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
givepower = 3-(2*(root,fvar(2) != 1)),1
fall = 0+(1*(enemy,statetype = A))
fall.recover = 1 - ((enemy,statetype = A) * 1) 
fall.recovertime = 30

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 1707+random%2
scale = 0.67, 0.67
postype = p1
pos = 10, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 0

;[State 0, VarSet]
;type = parentVarSet
;trigger1 = movehit = 1
;fvar(2) = root,fvar(2)*0.95

[State 0, destroyself]
type = Destroyself
trigger1 = var(1) = 15

;---------------------------------------------------------------------------
;Explosive Potion - Into the Front
[Statedef 1610]
Type     = S
MoveType = A
Physics  = S
Anim     = 1600
Ctrl     = 0
Facep2   = 1
poweradd = 85

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, Turn]
type = Turn
trigger1 = animelem = 3 && p2bodydist x < -10

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1601, 3

[State 600]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 1601
ID = 1611
Name = "Potion"
Pos = 20,-75
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 600]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
ctrl=1

;---------------------------------------------------------------------------
;Explosive Potion - Long Throw
[Statedef 1620]
Type     = S
MoveType = A
Physics  = S
Anim     = 1600
Ctrl     = 0
Facep2   = 1
poweradd = 85

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 0, Turn]
type = Turn
trigger1 = animelem = 3 && p2bodydist x < -10

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1601, 3

[State 600]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 1601
ID = 1621
Name = "Potion"
Pos = 20,-75
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 600]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
ctrl=1

;---------------------------------------------------------------------------
;Aerial Explosive Potion - Down Below
[Statedef 1650]
Type     = A
MoveType = A
Physics  = N
Anim     = 1600
Ctrl     = 0
Facep2   = 1
poweradd = 85

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 605, ??]
Type = VelMul
Trigger1 = Time = 0
X = 0.2
Y = 0.2

[State 0, Turn]
type = Turn
trigger1 = animelem = 3 && p2bodydist x < -10

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1601, 3

[State 600]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 1601
ID = 1651
Name = "Potion"
Pos = 20,-75
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 0, VelSet]
type = VelSet
Trigger1 = Pos Y >= 0
y = 0

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
;Aerial Explosive Potion - Into the Front
[Statedef 1660]
Type     = A
MoveType = A
Physics  = N
Anim     = 1600
Ctrl     = 0
Facep2   = 1
poweradd = 85

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 605, ??]
Type = VelMul
Trigger1 = Time = 0
X = 0.2
Y = 0.2

[State 605, ??]
Type = ChangeState
Value = 52
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3 && p2bodydist x < -10

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1601, 3

[State 600]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 1601
ID = 1611
Name = "Potion"
Pos = 20,-75
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 0, VelSet]
type = VelSet
Trigger1 = Pos Y >= 0
y = 0

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
;Aerial Explosive Potion - Long Throw
[Statedef 1670]
Type     = A
MoveType = A
Physics  = N
Anim     = 1600
Ctrl     = 0
Facep2   = 1
poweradd = 85

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 4
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 4
var(42) = 60

[State 605, ??]
Type = VelMul
Trigger1 = Time = 0
X = 0.2
Y = 0.2

[State 605, ??]
Type = ChangeState
Value = 52
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0

[State 0, Turn]
type = Turn
trigger1 = animelem = 3 && p2bodydist x < -10

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 4
value = 1601, 3

[State 600]
Type = Helper
Trigger1 = AnimElem = 4
StateNo = 1601
ID = 1621
Name = "Potion"
Pos = 20,-75
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 0, VelSet]
type = VelSet
Trigger1 = Pos Y >= 0
y = 0

[State 0, PosSet]
type = PosSet
Trigger1 = Pos Y >= 0
Trigger1 = Vel Y >= 0
y = 0

[State 240, 3]
type = ChangeState
Trigger1 = Pos Y <= -1
;Trigger1 = Vel Y <= 1
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 605, ??]
Type = ChangeState
Value = 0
Trigger1 = Pos Y >= 0
;Trigger1 = Vel Y >= 0
trigger1 = AnimTime = 0
ctrl = 1

;---------------------------------------------------------------------------
;Starfall
[Statedef 1700]
Type     = S
MoveType = A
Physics  = S
Anim     = 1700
Ctrl     = 0
Facep2   = 1
poweradd = 100

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 6
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 6
var(42) = 60

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 1701
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 4
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1701
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = animelem = 5
anim = 1702
scale = 0.61, 0.61
pos = 0, 0
sprpriority = -1
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1702
facing = 1
persistent = 0

[State 240, 1]
type = PlaySnd
Trigger1 = AnimElem = 6
Trigger2 = Animelem = 8
Trigger3 = Animelem = 10
value = 1000, 2

[State 600]
Type = Helper
Trigger1 = AnimElem = 6
Trigger2 = Animelem = 8
Trigger3 = Animelem = 10
StateNo = 1701
ID = 1710
Name = "Effect Shine"
Pos = -5,-110
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.25
Size.YScale = 0.25

[State 600]
Type = Helper
Trigger1 = AnimElem = 6
Trigger2 = Animelem = 8
Trigger3 = Animelem = 10
StateNo = 1702
ID = 1720
Name = "Star Ascending"
Pos = -5,-90
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 600]
Type = Helper
Triggerall = AnimElemtime(6) >= 0
Triggerall = Animelemtime(11) <= 1
trigger1 = time%2
StateNo = 1704
ID = 1730
Name = "Smaller Star Ascending"
Pos = -15+random%20,-100+random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 3
Size.XScale = 0.2
Size.YScale = 0.2

[State 600]
Type = Helper
trigger1 = time = 20
StateNo = 1706
ID = 1799
Name = "Star Memorizer"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 3
Size.XScale = 0.2
Size.YScale = 0.2

[State 600]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 0
ctrl=1

;--------------------------------------------------------------------------
[Statedef 1701]
type = A
movetype = A
physics = N
ctrl=0
anim=1703
sprpriority= 3

[State ]
Type = AngleDraw
Trigger1 = 1
value = 90
scale = 1 + var(0) * 1 - var(1) * 0.75,1 + var(0) * 1 - var(1) * 0.75
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 160 - var(1) * 40,256
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time 
var(0) = 0

[State 0, VarSet]
type = Varadd
trigger1 = time = 1
trigger2 = time = 2
trigger3 = time = 3
var(0) = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time 
var(1) = 0

[State 0, VarSet]
type = Varadd
trigger1 = time > 3
var(1) = 1

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State 0, destroyself]
type = Destroyself
trigger1 = animtime = 0
trigger2 = parent,stateno != 1700 && parent,stateno != 1750

;--------------------------------------------------------------------------
[Statedef 1702]
type = A
movetype = A
physics = N
ctrl=0
anim=1704
sprpriority=4

[State 0, VelSet]
type = VelSet
trigger1 = !time
y = -20

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State ]
Type = AngleDraw
Trigger1 = 1
Value = var(0)
ignorehitpause = 1

[State Hitdef]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=1
attr = A,  SP
damage = floor((15*(3*(palno = 12)))+15*root,fvar(3)),1
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 0,5
guard.pausetime = 0,0
sparkno = -1
sparkxy = 0,0 
hitsound = s100, 17                
guardsound = s500, 0   
ground.type = High
air.type = High
ground.hittime  = 20
guard.hittime= 20
ground.velocity = 0,-5.5 
guard.velocity= -5
guard.slidetime = 20
air.velocity =0,-5.5
airguard.velocity=-1,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
givepower = 5-(3*(root,fvar(2) != 1)),2
fall = 1
fall.recover = 0

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 1707+random%2
scale = 0.67, 0.67
postype = p1
pos = 10, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 0

[State 600]
Type = Helper
trigger1 = time < 9
Trigger1 = time%2
StateNo = 1703
ID = 1730
Name = "Small Star"
Pos = -20 + random%40,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 2
Size.XScale = 0.1
Size.YScale = 0.1

[State 0, VarSet]
type = parentVarSet
trigger1 = movehit = 1
fvar(2) = parent,fvar(2)*0.95

[State 0, destroyself]
type = Destroyself
trigger1 = time = 60

;---------------------------------------------------------------------------
[Statedef 1703]
type = A
movetype = A
physics = N
ctrl=0
anim=1705
sprpriority=-1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = ((50 - random%100) * 0.1)
y = 15

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 180 - time * 20,256
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = var(0)
scale = 1 * (var(0) * 0.01),1 * (var(0) * 0.01)
ignorehitpause = 1

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State 0, destroyself]
type = Destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
[Statedef 1704]
type = A
movetype = A
physics = N
ctrl=0
anim=1705
sprpriority=-1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = ((25 - random%50) * 0.1)
y = -15

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 180 - time * 20,256
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = var(0)
scale = 1 * (var(0) * 0.01),1 * (var(0) * 0.01)
ignorehitpause = 1

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State 0, destroyself]
type = Destroyself
trigger1 = animtime = 0

;--------------------------------------------------------------------------
[Statedef 1705]
type = A
movetype = A
physics = N
ctrl=0
anim=1706
sprpriority=4

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 3 - ((random%60) * 0.1)
y = 20

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = (Vel X)
Value = ATan(Vel Y/Vel X)*(-180.0/Pi)+((Vel X<0)*180)

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = vel x = 0
Value = -90

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow
ignorehitpause = 1

[State Hitdef]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1=time
attr = A,  SP
damage = floor((20*(3*(palno = 12)))+20*root,fvar(3)),2
animtype = Light
guardflag = M
hitflag = MAFD
priority = 4, Hit
pausetime = 0,5
guard.pausetime = 0,0
sparkno = -1
sparkxy = 0,0 
hitsound = s100, 12                
guardsound = s100, 12  
ground.type = High
air.type = High
ground.velocity = -1
ground.hittime  = 20
guard.hittime= 20
air.velocity =-1,-2
guard.velocity= -5
guard.slidetime = 20
air.velocity =-1,-1
airguard.velocity=-1,-2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
givepower = 5-(3*(root,fvar(2) != 1)),2
fall = 0 + (enemy,statetype = A * 1)
fall.recover = 1 
fall.recovertime = 30

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 1707+random%2
scale = 0.8, 0.8
postype = p1
pos = 10, 0
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 0

[State 0, VarSet]
type = parentVarSet
trigger1 = movehit = 1
fvar(2) = parent,fvar(2)*0.95

[State 0, destroyself]
type = Destroyself
trigger1 = movehit
trigger2 = moveguarded
trigger3 = movereversed
trigger4 = frontedgedist<-75
trigger5 = backedgedist<-75
trigger6 = time = 120
trigger7 = pos y > 300

;--------------------------------------------------------------------------
[Statedef 1706]
type = A
movetype = A
physics = N
ctrl=0
anim=9999
sprpriority=4

[State 600]
Type = Helper
Trigger1 = time = [26,30]
StateNo = 1705
ID = 1705
Name = "Stars Falling"
Pos = -75 + random%150 , -700 - random%300
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.2
Size.YScale = 1.2

[State 600]
Type = Helper
Trigger1 = time = [26,30]
StateNo = 1705
ID = 1705
Name = "Stars Falling"
Pos = -75 + random%150 , -700 - random%300
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.2
Size.YScale = 1.2

[State 0, Explod]
type = Explod
Trigger1 = time = [26,30]
anim = 8001
ID = 1750
Pos = -75 + random%150 , -700 - random%300
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 3 - ((random%60) * 0.1),20
accel = 0,0
random = 0,0
removetime = 60
pausemovetime = 0
scale = 0.28,0.28
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
Trigger1 = time = [26,30]
anim = 8001
ID = 1750
Pos = -75 + random%150 , -700 - random%300
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 3 - ((random%60) * 0.1),20
accel = 0,0
random = 0,0
removetime = 60
pausemovetime = 0
scale = 0.2,0.2
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, destroyself]
type = Destroyself
trigger1 = time = 30

;---------------------------------------------------------------------------
;Aerial Starfall
[Statedef 1750]
Type     = A
MoveType = A
Physics  = N
Anim     = 1700
Ctrl     = 0
Facep2   = 1
poweradd = 100

[State 301, VarAdd]
Type = VarAdd
trigger1 = animelem = 6
var(40) = -200

[State 301, VarSet]
Type = VarSet
trigger1 = animelem = 6
var(42) = 60

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 77000]
type = explod
trigger1 = animelem = 4
anim = 1701
scale = 0.61, 0.61
pos = 0, 0
sprpriority = 4
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1701
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = animelem = 5
anim = 1702
scale = 0.61, 0.61
pos = 0, 0
sprpriority = -1
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 1702
facing = 1
persistent = 0

[State 240, 1]
type = PlaySnd
Trigger1 = AnimElem = 6
Trigger2 = Animelem = 8
Trigger3 = Animelem = 10
value = 1000, 2

[State 600]
Type = Helper
Trigger1 = AnimElem = 6
Trigger2 = Animelem = 8
Trigger3 = Animelem = 10
StateNo = 1701
ID = 1710
Name = "Effect Shine"
Pos = -5,-110
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.25
Size.YScale = 0.25

[State 600]
Type = Helper
Trigger1 = AnimElem = 6
Trigger2 = Animelem = 8
Trigger3 = Animelem = 10
StateNo = 1702
ID = 1720
Name = "Star Ascending"
Pos = -5,-90
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61

[State 600]
Type = Helper
Triggerall = AnimElemtime(6) >= 0
Triggerall = Animelemtime(11) <= 1
trigger1 = time%2
StateNo = 1704
ID = 1730
Name = "Smaller Star Ascending"
Pos = -15+random%20,-100+random%20
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 3
Size.XScale = 0.2
Size.YScale = 0.2

[State 600]
Type = Helper
trigger1 = time = 20
StateNo = 1706
ID = 1799
Name = "Star Memorizer"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 3
Size.XScale = 0.2
Size.YScale = 0.2

[State 600]
Type = ChangeState
Trigger1 = AnimTime = 0
Value = 50
ctrl=0

;---------------------------------------------------------------------------
; Occult - Mysterious Meteorite
[Statedef 2000]
Type     = A
MoveType = A
Physics  = N
Anim     = 2000
velset = 0,0
facep2 = 1
Ctrl     = 0

;[State 1000,2]
;type = explod
;trigger1 = Time = 0
;ID = 7500
;anim = 7500
;pos = 0,-50
;scale = 0.7,0.7
;postype = p1
;sprpriority = -9
;supermove = 1
;supermovetime = 60
;pausemovetime = 60
;ownpal = 1
;bindtime = 1

[State 301, VarAdd]
Type = VarAdd
triggerall = anim = 2000
trigger1 = animelem = 2
var(40) = -200

[State 301, VarSet]
Type = VarSet
triggerall = anim = 2000
trigger1 = animelem = 2
var(42) = 60

[State 40, 2]
type = NotHitBy
trigger1 = stateno = 2000
value = SCA, AT,ST,NT,HT
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 2000
trigger1 = animelem = 2
x = -320
y = -400

[State 600]
Type = Helper
triggerall = anim = 2000
trigger1 = animelem = 2
StateNo = 2001
ID = 2001
Name = "Effect Fire"
Pos = 5, -45
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0

[State 77000]
type = explod
trigger1 = !time
anim = 9999
scale = 0.001, 0.001
pos = 0,0
postype = p1
sprpriority = -3
ownpal = 1
removeongethit = 0
removetime = 900-(840*(palno = 12))
ignorehitpause = 1
supermovetime = 60
pausemovetime = 60
bindtime = -1
id = 22020
facing = 1

[State 600]
Type = Helper
trigger1 = !time
StateNo = 802
ID = 802
Name = "Star Ring"
Pos = 0, -60
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = !time
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = !time
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = !time
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = !time
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = !time
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = !time
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = !time
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = !time
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time = [1,4]
scale = 1-time*0.24,1
IgnoreHitPause = 1

[State 0, AngleDraw]
type = AngleDraw
triggerall = anim = 2000
trigger1 = animelemtime(2) >= 0
value = -30
IgnoreHitPause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = anim = 2000
value = 0
movecamera = 0,0
IgnoreHitPause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 2000
trigger1 = animelem = 1
value = S48000,1
IgnoreHitPause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 2000
trigger1 = animelem = 4
value = S200,5
persistent = 0
IgnoreHitPause = 1

[State 3000, 1]
type = VelSet
triggerall = anim = 2000
trigger1 = animelem = 2
x = 15
y = 15
IgnoreHitPause = 1

[State 3000, 3]
type = VelMul
trigger1 = anim = 2001
x = 0.9
y = 0.8
IgnoreHitPause = 1

[State 3000]
Type = Changeanim
Trigger1 = pos y > 0 && anim = 2000
Value = 2001
IgnoreHitPause = 1

[State 0, VelSet]
type = VelSet
trigger1 = anim = 2001 && animelem = 1
y = 0
IgnoreHitPause = 1

[State 0, VelSet]
type = posset
trigger1 = anim = 2001
y = 0
IgnoreHitPause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 2001
trigger1 = animelem = 1
value = S2200,0
IgnoreHitPause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = anim = 2001 
value = 1
movecamera = 0,0
IgnoreHitPause = 1

[State 190]
Type     = EnvShake
trigger1 = anim = 2001 && animelem = 1
Time     = 10
Freq     = 90
Ampl     = 2
Phase    = 120

[State 1000,2]
type = explod
trigger1 = anim = 2001 && animelem = 1
ID =2003
anim = 2003
pos = 25,0
scale = 1.0,1.0
postype = p1
sprpriority = 9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 630, 3]
type = HitDef
trigger1 = Time = 0
attr = A, SA
damage    = 90, 10
guardflag = 
priority = 999
pausetime = 5,5
sparkno = -1
sparkxy = -9, -17
hitsound   = s100,3
guardsound = s500, 0
animtype = Heavy
ground.type = High
ground.slidetime = 14
ground.hittime  = 15
ground.velocity = -11,11
Guard.Velocity    = -9
guard.slidetime = 22
air.velocity = -11,11
fall = 1
fall.recover = 0
getpower = 100
givepower = 45-(22*(root,fvar(2) != 1)),11
id = 10052

[State 201]
Type = TargetState
Trigger1 = NumTarget
Trigger1 = movehit
trigger1 = var(21) = 0
Value = 10052
ID = 10052
IgnoreHitPause = 1
Persistent = 1 

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 2, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6230+random%5
scale = 0.78, 0.78
postype = p2
pos = 2, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 0

[State 600]
Type = Helper
trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
Pos = -2, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.62
Size.YScale = 0.62

[State 0, Width]
type = Width
trigger1 = 1
edge = 50,50
player = 0,0
;value = 0,0
;ignorehitpause = 
;persistent = 

[State 3000]
Type = Changestate
Trigger1 = anim = 2001
trigger1 = animtime = 0
Value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 2001]
type = A
movetype = A
physics = N
sprpriority=4
Anim    = 2002

[State 0, BindToParent]
type = BindToParent
trigger1 = time
time = 999
Pos = 5, -45
ignorehitpause = 1

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -45
scale = 2.5,1.3

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = parent,stateno = 2000 && parent,anim = 2001
trigger2 = parent,stateno != 2000

;--------------------------------------------------------------------------
;Super - Bomb
[Statedef 3000]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 3000
velset = 0

[State 0, NotHitBy]
type = NotHitBy
triggerall = stateno = 3000
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT, AA, AT, AP
time = 1

[State 77000]
type = explod
trigger1 = !time
anim = 99999
scale = 0.1, 0.1
pos = 0,0
sprpriority = 1
ownpal = 1
removeongethit = 0
removetime = 2000-(1820*(palno = 12))
ignorehitpause = 1
id = 30000
facing = 1

[State 0, PalFX]
type = PalFX
trigger1 = time = 9
time = 150
add = 100,100,100
mul = 256,256,256
sinadd = 48,20,16,10
invertall = 0
;color = 256
;ignorehitpause = 
;persistent = 

[State 0, PalFX]
type = PalFX
trigger1 = time = 9
time = 180
add = 100,100,100
mul = 256,256,256
sinadd = 48,20,16,10
invertall = 0
;color = 256
;ignorehitpause = 
;persistent = 

[State 0, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 165
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4000,0

[State 1000,1]
type = SuperPause
trigger1 = !time
time = 60
poweradd = -1000
unhittable = 1
anim = -1
darken = 0
p2defmul = 1
persistent = 0

[State 1000,2]
type = explod
trigger1 = !time
ID = 4000
anim = 4000
pos = -7,-5
scale = 0.9,0.9
postype = p1
sprpriority = 3
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4011
anim = 4011
pos = -60,0
scale = 0.4,0.4
postype = back
sprpriority = -9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 600]
Type = Helper
trigger1 = !time
StateNo = 3001
ID = 3001
Name = "Clone"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61
supermovetime = 60
pausemovetime = 60
ownpal = 1

[State 600]
Type = Helper
trigger1 = time = 9
StateNo = 3004
ID = 3004
Name = "Bomb Invulnerable"
Pos = 0,-999
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.01
Size.YScale = 0.01

[State 3801, 3]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1= time
attr = , HA
damage    = 185, 185
guardflag = 
priority = 999
pausetime = 0,0
sparkno = -1
sparkxy = -9, -17
hitsound   = s4500,1
guardsound = s4500,1
animtype = Med
ground.type = High
ground.slidetime = 14
ground.hittime  = 15
ground.velocity = -10,-8
air.velocity = -10,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
givepower = 0
fall = 1
fall.recover = 0

[State 0, PosSet]
type = PosSet
trigger1 = time <= 7
y = 0

[State 1214, PosSet]
type = PosSet
trigger1 = time = 8
x = IfElse(facing = 1,-300,300)
y = -90

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time > 7
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 802
ID = 802
Name = "Star Ring"
Pos = 0, -60
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 1000,2]
type = explod
trigger1 = time = 3
ID =2003
anim = 2003
pos = 0,0
scale = 2.0,2.0
postype = p1
sprpriority = 9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S4800,1

;[State 0, VarSet]
;type = VarSet
;triggerall = fvar(2) < 0.75
;trigger1 = !time
;fvar(2) = 0.75
;persistent = 0

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.5

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 9
value = 101
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 3001]
type    = S                      
movetype= A                     
physics = S                                           
velset = 0,0                     
ctrl = 0                         
anim = 3001  
      
[State 0, PalFXWiz]
type = PalFX
trigger1 = anim = 3001
time = 1
add = 2 * var(48),2 * var(48),10 * var(48)
mul = 256,256,256
sinadd = -80,-80 ,-80,10
invertall = 0
color = 256
persistent = 1
supermovetime = 60
pausemovetime = 60

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(48) = 0 
supermovetime = 60
pausemovetime = 60

[State 0, VarSet]
type = Varadd
trigger1 = time
var(48) = 1
supermovetime = 60
pausemovetime = 60     

[State 1001]
Type=Destroyself
Trigger1= animtime = 0

;---------------------------------------------------------------------------
[Statedef 3004]
type    = S                      
movetype= A                     
physics = S                                           
velset = 0,0                     
ctrl = 0                         
anim = 9999                

[State 1001]
Type=Destroyself
Trigger1= time = 150

;--------------------------------------------------------------------------
;Super - Aerial Bomb
[Statedef 3050]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 3000
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
triggerall = stateno = 3050
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT, AA, AT, AP
time = 1

[State 77000]
type = explod
trigger1 = !time
anim = 99999
scale = 0.1, 0.1
pos = 0,0
sprpriority = 1
ownpal = 1
removeongethit = 0
removetime = 2000-(1820*(palno = 12))
ignorehitpause = 1
id = 30000
facing = 1

[State 0, PalFX]
type = PalFX
trigger1 = time = 9
time = 150
add = 100,100,100
mul = 256,256,256
sinadd = 48,20,16,10
invertall = 0
;color = 256
;ignorehitpause = 
;persistent = 

[State 0, PalFX]
type = PalFX
trigger1 = time = 9
time = 180
add = 100,100,100
mul = 256,256,256
sinadd = 48,20,16,10
invertall = 0
;color = 256
;ignorehitpause = 
;persistent = 

[State 0, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 165
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4000,0

[State 1000,1]
type = SuperPause
trigger1 = !time
time = 60
poweradd = -1000
unhittable = 1
anim = -1
darken = 0
p2defmul = 1
persistent = 0

[State 1000,2]
type = explod
trigger1 = !time
ID = 4000
anim = 4000
pos = -7,-5
scale = 0.9,0.9
postype = p1
sprpriority = 0
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4011
anim = 4011
pos = -60,0
scale = 0.4,0.4
postype = back
sprpriority = -9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 600]
Type = Helper
trigger1 = !time
StateNo = 3001
ID = 3001
Name = "Clone"
Pos = 0,0
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.61
Size.YScale = 0.61
supermovetime = 60
pausemovetime = 60
ownpal = 1

[State 600]
Type = Helper
trigger1 = time = 9
StateNo = 3004
ID = 3004
Name = "Bomb Invulnerable"
Pos = 0,-999
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.01
Size.YScale = 0.01

[State 3801, 3]
type = HitDef
triggerall = !movecontact && !movereversed
trigger1= time
attr = , HA
damage    = 185, 185
guardflag = 
priority = 999
pausetime = 0,0
sparkno = -1
sparkxy = -9, -17
hitsound   = s4500,1
guardsound = s4500,1
animtype = Med
ground.type = High
ground.slidetime = 14
ground.hittime  = 15
ground.velocity = -10,-8
air.velocity = -10,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
givepower = 0
fall = 1
fall.recover = 0

[State 1214, PosSet]
type = PosSet
trigger1 = time = 8
x = IfElse(facing = 1,-300,300)
y = -90

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time > 7
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 802
ID = 802
Name = "Star Ring"
Pos = 0, -60
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 600]
Type = Helper
trigger1 = time = 3
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.4
Size.YScale = 0.4

[State 1000,2]
type = explod
trigger1 = time = 3
ID =2003
anim = 2003
pos = 0,0
scale = 2.0,2.0
postype = p1
sprpriority = 9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S4800,1

;[State 0, VarSet]
;type = VarSet
;triggerall = fvar(2) < 0.75
;trigger1 = !time
;fvar(2) = 0.75
;persistent = 0

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.5

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 9
value = 101
ctrl = 0

;---------------------------------------------------------------------------
; Super - Stellar Journey
[Statedef 3100]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                    
ctrl = 0                         
anim = 3100   
facep2 = 1                                   
sprpriority = 2                  

[State 77000]
type = explod
trigger1 = !time
anim = 99999
scale = 0.1, 0.1
pos = 0,0
sprpriority = 1
ownpal = 1
removeongethit = 0
removetime = 600-(540*(palno = 12));- ((life < 300) * 840)
ignorehitpause = 1
id = 31000
facing = 1

[State 0, Turn]
type = Turn
trigger1 = animelem = 5 && p2bodydist x < -30

[State 0, NotHitBy]
type = NotHitBy
triggerall = stateno = 3100
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT, AA, AT, AP
time = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 120
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4000,0

[State 1000,1]
type = SuperPause
trigger1 = !time
time = 60
poweradd = -500
unhittable = 1
anim = -1
darken = 0
p2defmul = 1
persistent = 0

[State 1000,2]
type = explod
trigger1 = !time
ID = 4001
anim = 4001
pos = 0,0
scale = 0.61,0.61
postype = p1
sprpriority = 1
supermovetime = 60
pausemovetime = 60
ownpal = 0
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4000
anim = 4000
pos = -7,-5
scale = 0.9,0.9
postype = p1
sprpriority = 3
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4012
anim = 4012
pos = -40,0
scale = 0.4,0.4
postype = back
sprpriority = -9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, HT        
hitflag = MA        
priority = 9    
sparkno = -1          
p1sprpriority = 1   
hitsound = S100,2                        
p1facing = 1
p2facing = 1          
;p1stateno = 3110  
p2stateno = 3150
guard.dist = 0        
fall = 1          
fall.recover = 0  

[State 600]
Type = Helper
Trigger1 = animelem = 6
StateNo = 3101
ID = 3101
Name = "Star"
Pos = 38,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.9
Size.YScale = 0.9

[State 600]
Type = Helper
Trigger1 = animelem = 6
StateNo = 3102
ID = 3102
Name = "Effect"
Pos = 38,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.2
Size.YScale = 1.2

[State 600]
Type = Helper
Trigger1 = animelem = 6
StateNo = 3102
ID = 3103
Name = "Effect"
Pos = 38,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.6
Size.YScale = 0.6

[State 600]
Type = Helper
Trigger1 = animelem = 6
StateNo = 3103
ID = 3104
Name = "Effect 2"
Pos = 38,-55
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.2
Size.YScale = 1.2

[State 200, 3]
type = PlaySnd
trigger1 = animelem = 6
value = s1200, 0
channel = 0

[State 600]
Type = Helper
Trigger1 = movehit
StateNo = 3111
ID = 3111
Name = "Star"
Pos = 0,-55
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 1.2
Size.YScale = 1.2

[State 200, 2]
type = ChangeState
triggerall = movehit
trigger1 = AnimTime = 0
value = 3110
ctrl = 0

[State 77000]
type = explod
triggerall = !movehit
trigger1 = animtime = 0
anim = 99999
scale = 0.1, 0.1
pos = 0,0
sprpriority = 1
ownpal = 1
removeongethit = 0
removetime = 1200-(1140*(palno = 12));- ((life < 300) * 840)
ignorehitpause = 1
id = 31000
facing = 1

[State 200, 2]
type = ChangeState
triggerall = !movehit
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------
[Statedef 3101]
Physics = N
Anim    = 201
sprpriority = 6

[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 3000,1
dest = 3100,0

[State 0, Trans]
type = Trans
triggerall = time >= 6
trigger1 = 1
trans = addalpha
alpha = 256 - ((time - 6) * 75),256

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = 1 + 0.05*time + ((time > 6)*0.68),1+ 0.05*time + ((time > 6)*0.68)

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0

;--------------------------------------------------------------------------
[Statedef 3102]
Physics = N
Anim    = 202
sprpriority = 4

[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 3000,1
dest = 3100,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (time * 22),256

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = 1 + 0.15*time,1+ 0.15*time

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0

;--------------------------------------------------------------------------
[Statedef 3103]
Physics = N
Anim    = 203
sprpriority = 5

[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 3000,1
dest = 3100,0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - (time * 22),256

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360 

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0)
scale = 1 + 0.15*time,1+ 0.15*time

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Success
[Statedef 3110]
type    = S
movetype= A
physics = S
anim = 3110
poweradd = 0

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 0
value = -500

[State 0, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 145
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 810, Bind 1]
type = TargetBind
trigger1 = !time
pos = 65, 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = S3100,0
persistent = 0

[State 191]
Type = Explod
trigger1 = animelem = 6
Anim = 712
Pos = 0,0
Vel = 6.5*Cos(var(0)/100.),1.3*Sin(var(0)/100.)
Accel = -6.5*Cos(var(0)/100.)/60,-1.3*Sin(var(0)/100.)/60
SprPriority = 1
postype = p2
OwnPal = 1
bindtime = 1
scale = 0.5,0.5

[State 191]
Type = Explod
trigger1 = animelem = 6
Anim = 712
Pos = 0,0
Vel = 6.5*Cos(var(0)/100.+1*Pi/4),1.3*Sin(var(0)/100.+1*Pi/4)
Accel = -6.5*Cos(var(0)/100.+1*Pi/4)/60,-1.3*Sin(var(0)/100.+1*Pi/4)/60
SprPriority = 1
postype = p2
OwnPal = 1
bindtime = 1
scale = 0.5,0.5

[State 191]
Type = Explod
trigger1 = animelem = 6
Anim = 712
Pos = 0,0
Vel = 6.5*Cos(var(0)/100.+2*Pi/4),1.3*Sin(var(0)/100.+2*Pi/4)
Accel = -6.5*Cos(var(0)/100.+2*Pi/4)/60,-1.3*Sin(var(0)/100.+2*Pi/4)/60
SprPriority = 1
postype = p2
OwnPal = 1
bindtime = 1
scale = 0.5,0.5

[State 191]
Type = Explod
trigger1 = animelem = 6
Anim = 712
Pos = 0,0
Vel = 6.5*Cos(var(0)/100.+3*Pi/4),1.3*Sin(var(0)/100.+3*Pi/4)
Accel = -6.5*Cos(var(0)/100.+3*Pi/4)/60,-1.3*Sin(var(0)/100.+3*Pi/4)/60
SprPriority = 1
postype = p2
OwnPal = 1
bindtime = 1
scale = 0.5,0.5

[State 191]
Type = Explod
trigger1 = animelem = 6
Anim = 712
Pos = 0,0
Vel = 6.5*Cos(var(0)/100.+4*Pi/4),1.3*Sin(var(0)/100.+4*Pi/4)
Accel = -6.5*Cos(var(0)/100.+4*Pi/4)/60,-1.3*Sin(var(0)/100.+4*Pi/4)/60
SprPriority = -1
postype = p2
OwnPal = 1
bindtime = 1
scale = 0.5,0.5

[State 191]
Type = Explod
trigger1 = animelem = 6
Anim = 712
Pos = 0,0
Vel = 6.5*Cos(var(0)/100.+5*Pi/4),1.3*Sin(var(0)/100.+5*Pi/4)
Accel = -6.5*Cos(var(0)/100.+5*Pi/4)/60,-1.3*Sin(var(0)/100.+5*Pi/4)/60
SprPriority = -1
postype = p2
OwnPal = 1
bindtime = 1
scale = 0.5,0.5

[State 191]
Type = Explod
trigger1 = animelem = 6
Anim = 712
Pos = 0,0
Vel = 6.5*Cos(var(0)/100.+6*Pi/4),1.3*Sin(var(0)/100.+6*Pi/4)
Accel = -6.5*Cos(var(0)/100.+6*Pi/4)/60,-1.3*Sin(var(0)/100.+6*Pi/4)/60
SprPriority = -1
postype = p2
OwnPal = 1
bindtime = 1
scale = 0.5,0.5

[State 191]
Type = Explod
trigger1 = animelem = 6
Anim = 712
Pos = 0,0
Vel = 6.5*Cos(var(0)/100.+7*Pi/4),1.3*Sin(var(0)/100.+7*Pi/4)
Accel = -6.5*Cos(var(0)/100.+7*Pi/4)/60,-1.3*Sin(var(0)/100.+7*Pi/4)/60
SprPriority = -1
postype = p2
OwnPal = 1
bindtime = 1
scale = 0.5,0.5

[State 1000,2]
type = explod
trigger1 = animelem = 34
ID = 3112
anim = 3111
pos = 0,-8
scale = 0.61,1
postype = p2
sprpriority = 1
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
trigger1 = animelem = 34
ID = 3113
anim = 3112
pos = 0,-8
scale = 1,1
postype = p2
sprpriority = 1
ownpal = 1
bindtime = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 34
value = S1,15
persistent = 0

[state 0]
type = Helper
trigger1 = animelem = 34
pos = 0, 0
postype = p2
stateno = 100060
sprpriority = 7
ownpal = 1
persistent = 0
size.xscale = 0.45
size.yscale = 0.45

[State 190]
Type     = EnvShake
trigger1 = animelem = 34
Time     = 10
Freq     = 90
Ampl     = 2
Phase    = 120
IgnoreHitPause = 1
persistent = 0

[State Explod, 1]
type = Explod
trigger1 = animelem = 34
anim = 7001
ID = 7001
pos = 0, 0
postype = p2
sprpriority = -1
IgnoreHitPause = 1
facing = -1
ownpal = 1
scale = 0.7,0.7
persistent = 0

[State 600]
Type = Helper
trigger1 = animelem = 34
StateNo = 6102
ID = 6100
Name = "Effect Ring"
pos = 0, 2
PosType = P2
sprpriority = -2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.4
Size.YScale = 0.1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 34
value = S4800,1
persistent = 0

[State 810, State End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------
[Statedef 3111]
Physics = N
Anim    = 3101
sprpriority = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7800,4
persistent = 0

[State 0, BindToTarget]
type = posset
trigger1 = 1
x = enemy,pos x
y = enemy,pos y -55 
;trigger1 = 
;time = 1
;ID = -1
;ignorehitpause = 
;persistent =

[State 600]
Type = Helper
Trigger1 = !time
trigger2 = var(37) = 3
StateNo = 3113
ID = 3133
Name = "Sun"
Pos = random%20-10,random%20-10
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.16
Size.YScale = 0.16

[State 600]
Type = Helper
Trigger1 = !time
trigger2 = var(37) = 6
StateNo = 3113
ID = 3134
Name = "Sun"
Pos = random%20-10,random%20-10
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.32
Size.YScale = 0.32

[State 600]
Type = Helper
Trigger1 = !time
trigger2 = var(37) = 9
StateNo = 3113
ID = 3135
Name = "Sun"
Pos = random%20-10,random%20-10
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.24
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = var(37) = 2
trigger2 = var(37) = 5
trigger3 = var(37) = 8
StateNo = 3112
ID = 3136
Name = "Sun"
Pos = random%20-10,random%20-10
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3


[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger2 = var(37) = 9
var(37) = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = time
var(37) = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = var(0) + time * 12

[State 6000,~??~]
Type     = DestroySelf
trigger1 = pos y >= -35

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 3112]
type = A
movetype = A
physics = N
ctrl=0
anim=8002
sprpriority=1
velset=0,0

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VelSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1-(time*0.04),1-(time*0.04)
value = var(0) + time * 5
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State RemoveHelper]
type = Destroyself
trigger1 = animtime = 0

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 3113]
type = A
movetype = A
physics = N
Anim    = 8002
sprpriority = 5

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, VelSet]
type = VarSet
trigger1 = !time
var(0) = random%360

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = cos(random%360)*7
y = sin(random%360)*7

[State 0, AngleDraw]
Type = AngleDraw
Trigger1 = (Vel X)
Value = var(0) + time * 5;ATan(Vel Y/Vel X)*(-180.0/Pi)+((Vel X<0)*180)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1-((time>5)*((time-5)*.2)), 1-((time>5)*((time-5)*.2))

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = time = 10


;---------------------------------------------------------------------------
;Enemy State
[Statedef 3150]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 5030
sprpriority = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = enemy,anim = 3110
trigger1 = enemy,animelem = 5
value = 3151
ctrl = 0

[state 0,0]
type = velset
trigger1 = !time
x = 0
y = 0

[State 810, Bind 1]
type = posset
triggerall = enemy,facing = 1
trigger1 = time
x = enemy,pos x + 65
y = 0

[State 810, Bind 1]
type = posset
triggerall = enemy,facing = -1
trigger1 = time
x = enemy,pos x - 65
y = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = anim = 5030
value = SCA,AA,NA,SA,HA,AP,NP,SP,HP,AT,NT,ST,HT
time = 1

;Fail Safe
[state 0,0]
type = lifeadd
trigger1 = time = 600
value = -floor((220*(3*(enemy,palno = 12)))+220*enemy,fvar(3))
kill = 1
absolute = 1
pausemovetime = 99999
supermovetime = 99999

;Fail Safe
[State 0, ChangeState]
type = selfstate
trigger1 = time = 600
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 3151]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 5030
sprpriority = 1
velset = 0,-1.5

[State VelSet]
type = VelSet
trigger1 = time
x = -12*cos(pi*(((time)%50)/25.0))

[State VelMul]
type = VelMul
trigger1 = 1
y = 1.06

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y < -1000
value = 3152
ctrl = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = anim = 5030
value = SCA,AA,NA,SA,HA,AP,NP,SP,HP,AT,NT,ST,HT
time = 1

;Fail Safe
[state 0,0]
type = lifeadd
trigger1 = time = 600
value = -floor((220*(3*(enemy,palno = 12)))+220*enemy,fvar(3))
kill = 1
absolute = 1
pausemovetime = 99999
supermovetime = 99999

;Fail Safe
[State 0, ChangeState]
type = selfstate
trigger1 = time = 600
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 3152]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 5030
sprpriority = 1

[State VelSet]
type = posset
triggerall = enemy,facing = 1
trigger1 = 1
x = enemy,pos x + 125

[State VelSet]
type = posset
triggerall = enemy,facing = -1
trigger1 = 1
x = enemy,pos x - 125

[State VelMul]
type = Velset
trigger1 = 1
y = 40

[State 0, ScreenBound]
type = ScreenBound
trigger1 = pos y < -200
value = 0
movecamera = 0,0

[state 0,0]
type = lifeadd
trigger1 = pos y >= 20
trigger2 = time = 600
value = -floor((220*(3*(enemy,palno = 12)))+220*enemy,fvar(3))
kill = 1
absolute = 1
pausemovetime = 99999
supermovetime = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = anim = 5030
value = SCA,AA,NA,SA,HA,AP,NP,SP,HP,AT,NT,ST,HT
time = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >= 20
value = 10052
ctrl = 0

;Fail Safe
[State 0, ChangeState]
type = selfstate
trigger1 = time = 600
value = 5050
ctrl = 0

;---------------------------------------------------------------------------
; Super - Satellite Illusion
[Statedef 3200]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                    
ctrl = 0                         
anim = 3200   
facep2 = 1                                   
sprpriority = 2                  

[State 0, NotHitBy]
type = NotHitBy
triggerall = stateno = 3200
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT, AA, AT, AP
time = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 120
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 77000]
type = explod
trigger1 = time = 0
anim = 99999
scale = 0.1, 0.1
pos = 0,0
sprpriority = 1
ownpal = 1
removeongethit = 0
removetime = 1800-(1740*(palno = 12))
ignorehitpause = 1
id = 32000
facing = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4000,0

[State 1000,1]
type = SuperPause
trigger1 = !time
time = 60
poweradd = -1000
unhittable = 1
anim = -1
darken = 0
p2defmul = 1
persistent = 0

[State 1000,2]
type = explod
trigger1 = !time
ID = 4001
anim = 4001
pos = 0,0
scale = 0.61,0.61
postype = p1
sprpriority = 1
supermovetime = 60
pausemovetime = 60
ownpal = 0
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4000
anim = 4000
pos = -7,-5
scale = 0.9,0.9
postype = p1
sprpriority = 3
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4013
anim = 4013
pos = -40,0
scale = 0.4,0.4
postype = back
sprpriority = -9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Hitbox"
ID = 3299
Pos = 0,0
StateNo = 3203
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3210
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3220
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3230
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3240
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3250
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3260
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 0, PlaySnd]
type = PlaySnd
Trigger1 = animelem = 4
value = S3201,1

[State 0, PlaySnd]
type = PlaySnd
Trigger1 = animelem = 6
value = S3201,0

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 802
ID = 802
Name = "Star Ring"
Pos = 0, -60
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[StateDef 3201]
Type     = U
MoveType = I
Physics  = N
MoveHitPersist = 1
anim = 3201

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3220)
trigger1 = !time
source = 3200,1
dest = 3200,2

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3230)
trigger1 = !time
source = 3200,1
dest = 3200,3

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3240)
trigger1 = !time
source = 3200,1
dest = 3200,4

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3250)
trigger1 = !time
source = 3200,1
dest = 3200,5

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3260)
trigger1 = !time
source = 3200,1
dest = 3200,6

[State 2400]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow

[State 2400]
Type = Null
TriggerAll = var(0) = 0
Trigger1 = IsHelper(3210)
Trigger1 = (fvar(0) := 0) || 1
Trigger2 = IsHelper(3220)
Trigger2 = (fvar(0) := -60) || 1
Trigger3 = IsHelper(3230)
Trigger3 = (fvar(0) := -120) || 1
Trigger4 = IsHelper(3240)
Trigger4 = (fvar(0) := -180) || 1
Trigger5 = IsHelper(3250)
Trigger5 = (fvar(0) := -240) || 1
Trigger6 = IsHelper(3260)
Trigger6 = (fvar(0) := -300) || 1

[State 2400]
Type = VarAdd
Trigger1 = 1
fvar(0) = -5

[State 2400]
Type = BindToParent
Trigger1 = var(0) < 16
Pos = Facing * Parent,Facing * Floor(75.0*Cos(fvar(0) * Pi / 180)),Floor(-45.0*var(0)/16 + (10 + 10.0*var(0)/16)*Sin(fvar(0) * Pi / 180))+5
Facing = -1

[State 2400]
Type = BindToParent
Trigger1 = var(0) >= 16
Pos = Facing * Parent,Facing * Floor(75.0*Cos(fvar(0) * Pi / 180)),Floor(-45.0 + 20.0*Sin(fvar(0) * Pi / 180))+5
Facing = -1

[State 2400]
Type = SprPriority
Trigger1 = 1
Value = IfElse(Sin(fvar(0) * Pi / 180) > 0,9,-9)

[State 2400]
Type = Trans
Trigger1 = var(0) < 35
Trans = AddAlpha
Alpha = 256*var(0)/35,256 - 256*var(0)/35

[State 2400]
Type = VarAdd
Trigger1 = 1
var(0) = 1

[State 2400]
Type = VarAdd
Trigger1 = 1
var(9) = 1

[State 2400]
Type = Varset
Trigger1 = var(9) < 590
trigger1 = root,var(27) = 1
trigger2 = root,var(28) = 6
Trigger2 = var(9) < 590
var(9) = 590

[State 2400]
Type = Helper
triggerall = ishelper(3210)
Trigger1 = !time
Name = "Light Effect"
ID = 3310
Pos = 0,0
StateNo = 3202
OwnPal = 1
Size.XScale = 0.45
Size.YScale = 0.45

[State 2400]
Type = Helper
triggerall = ishelper(3220)
Trigger1 = !time
Name = "Light Effect"
ID = 3320
Pos = 0,0
StateNo = 3202
OwnPal = 1
Size.XScale = 0.45
Size.YScale = 0.45

[State 2400]
Type = Helper
triggerall = ishelper(3230)
Trigger1 = !time
Name = "Light Effect"
ID = 3330
Pos = 0,0
StateNo = 3202
OwnPal = 1
Size.XScale = 0.45
Size.YScale = 0.45

[State 2400]
Type = Helper
triggerall = ishelper(3240)
Trigger1 = !time
Name = "Light Effect"
ID = 3340
Pos = 0,0
StateNo = 3202
OwnPal = 1
Size.XScale = 0.45
Size.YScale = 0.45

[State 2400]
Type = Helper
triggerall = ishelper(3250)
Trigger1 = !time
Name = "Light Effect"
ID = 3350
Pos = 0,0
StateNo = 3202
OwnPal = 1
Size.XScale = 0.45
Size.YScale = 0.45

[State 2400]
Type = Helper
triggerall = ishelper(3260)
Trigger1 = !time
Name = "Light Effect"
ID = 3360
Pos = 0,0
StateNo = 3202
OwnPal = 1
Size.XScale = 0.45
Size.YScale = 0.45

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(10) = 0

[State 0, VarSet]
type = Varadd
trigger1 = var(9) > 589
trigger1 = time
var(10) = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = var(9) > 589
scale = 1 - 0.1 * var(10),1  - 0.1 * var(10)

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(9) = 600
;ignorehitpause = 
;persistent = 

;---------------------------------------------------------------------------
[StateDef 3202]
Type     = U
MoveType = I
Physics  = N
MoveHitPersist = 1
anim = 3202

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3320)
trigger1 = !time
source = 3200,1
dest = 3200,2

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3330)
trigger1 = !time
source = 3200,1
dest = 3200,3

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3340)
trigger1 = !time
source = 3200,1
dest = 3200,4

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3350)
trigger1 = !time
source = 3200,1
dest = 3200,5

[State 0, RemapPal]
type = RemapPal
triggerall = ishelper(3360)
trigger1 = !time
source = 3200,1
dest = 3200,6

[State 0, AngleDraw]
type = AngleDraw
trigger1 = parent,var(9) > 587
scale = 1 - 0.1 * parent,var(10),1  - 0.1 * parent,var(10)

[State 2400]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow

[State 2400]
Type = NotHitBy
Trigger1 = 1
Value = ,AA,AT
ignorehitpause = 1

[State 2400]
Type = BindToParent
Trigger1 = 1
time = 1

[State 2400]
Type = Trans
Trigger1 = var(0) < 35
Trans = AddAlpha
Alpha = 256*var(0)/35,256

[State 2400]
Type = VarAdd
Trigger1 = 1
fvar(0) = -3

[State 2400]
Type = SprPriority
Trigger1 = 1
Value = IfElse(Sin(parent,fvar(0) * Pi / 180) > 0,10,-8)

[State 2400]
Type = VarAdd
Trigger1 = 1
var(0) = 1

[State 2400]
Type = VarAdd
Trigger1 = 1
var(9) = 1

[State 2400]
Type = Varset
Trigger1 = var(9) < 588
trigger1 = root,var(27) = 1
trigger2 = root,var(28) = 6
Trigger2 = var(9) < 588
var(9) = 589

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(9) = 598
;ignorehitpause = 
;persistent = 

;---------------------------------------------------------------------------
[StateDef 3203]
Type     = U
MoveType = A
Physics  = N
MoveHitPersist = 1
anim = 3203

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1

[State 2400]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow

[State 200, 1]
type = HitDef
triggerall = hitcount < 6
trigger1 = time
attr = S, HA                     
damage = floor((20*(3*(palno = 12)))+20*root,fvar(3)),2                 
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 999, Hit                
pausetime = 16, 16 
;guard.pausetime = 16,16           
sparkno = -1                   
sparkxy = 2, -43            
hitsound = s100, 19                
guardsound = s500, 0                
ground.type = High            
ground.slidetime = 12
ground.hittime  = 12        
ground.velocity = -7.5;,-5
;-------------------   
air.hittime  = 12 
air.type = Low                  
air.velocity = -1,-1   
;-------------------      
guard.hittime = 12 
guard.slidetime = 12
Guard.Velocity    = -7.5         
airguard.velocity = -1,-1
airguard.hittime    = 12 
;-------------------   
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0; - fvar(5)
guard.cornerpush.veloff = 0;-7;
airguard.cornerpush.veloff = 0
;-------------------   
givepower = 5-(3*(root,fvar(2) != 1)),2
fall.recovertime = 45
fall = 0
air.fall = 1

[State 77000]
type = explod
trigger1 = movecontact = 1
anim = 1707+random%2
scale = 0.67, 0.67
pos = 5, -65
sprpriority = 7
postype = p2
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 17

[State 2400]
Type = VarAdd
Trigger1 = 1
var(9) = 1

[State 0, VarSet]
type = parentVarSet
trigger1 = movehit = 1
fvar(2) = parent,fvar(2)*0.95

[State 0, DestroySelf]
type = DestroySelf
trigger1 = var(9) = 590
trigger2 = hitcount = 6
trigger3 = root,var(28) = 6
trigger4 = numhelper(3210) = 0 && movecontact
;ignorehitpause = 
;persistent = 

;---------------------------------------------------------------------------
; Super - Aerial Satellite Illusion
[Statedef 3250]
Type     = A
MoveType = A
Physics  = N                                                           
ctrl = 0                         
anim = 3200   
facep2 = 1                                   
sprpriority = 2                  

[State 0, NotHitBy]
type = NotHitBy
triggerall = stateno = 3200
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT, AA, AT, AP
time = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 120
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 77000]
type = explod
trigger1 = time = 0
anim = 99999
scale = 0.1, 0.1
pos = 0,0
sprpriority = 1
ownpal = 1
removeongethit = 0
removetime = 1800-(1740*(palno = 12))
ignorehitpause = 1
id = 32000
facing = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4000,0

[State 1000,1]
type = SuperPause
trigger1 = !time
time = 60
poweradd = -1000
unhittable = 1
anim = -1
darken = 0
p2defmul = 1
persistent = 0

[State 1000,2]
type = explod
trigger1 = !time
ID = 4001
anim = 4001
pos = 0,0
scale = 0.61,0.61
postype = p1
sprpriority = 1
supermovetime = 60
pausemovetime = 60
ownpal = 0
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4000
anim = 4000
pos = -7,-5
scale = 0.9,0.9
postype = p1
sprpriority = 3
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4013
anim = 4013
pos = -40,0
scale = 0.4,0.4
postype = back
sprpriority = -9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Hitbox"
ID = 3299
Pos = 0,0
StateNo = 3203
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3210
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3220
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3230
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3240
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3250
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 2400]
Type = Helper
Trigger1 = animelem = 6
Name = "Orb"
ID = 3260
Pos = 0,0
StateNo = 3201
OwnPal = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 802
ID = 802
Name = "Star Ring"
Pos = 0, -60
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = animelem = 4
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 0, PlaySnd]
type = PlaySnd
Trigger1 = animelem = 4
value = S3201,1

[State 0, PlaySnd]
type = PlaySnd
Trigger1 = animelem = 6
value = S3201,0

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 200, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Super - Master Spark
[Statedef 3300]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 3300
Facep2   = 1
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
triggerall = stateno = 3300
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT, AA, AT, AP
time = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 240
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4000,0

[State 1000,1]
type = SuperPause
trigger1 = !time
time = 60
poweradd = -2000
unhittable = 1
anim = -1
darken = 0
p2defmul = 1
persistent = 0

[State 1000,2]
type = explod
trigger1 = !time
ID = 4001
anim = 4001
pos = 0,0
scale = 0.61,0.61
postype = p1
sprpriority = 1
supermovetime = 60
pausemovetime = 60
ownpal = 0
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4000
anim = 4000
pos = -7,-5
scale = 0.9,0.9
postype = p1
sprpriority = 3
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4014
anim = 4014
pos = -40,0
scale = 0.4,0.4
postype = back
sprpriority = -9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 0, Turn]
type = Turn
trigger1 = animelem = 8
trigger1 = p2dist x < -10

[State 4080]
Type = Helper
Trigger1 = animelem = 8
StateNo = 3303
ID = 3313
Name = "Ball"
Pos = 27,-66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Size.XScale = 0.135
Size.YScale = 0.135

[State 4080]
Type = Helper
Trigger1 = animelem = 9
StateNo = 3301
ID = 3311
Name = "Beam"
Pos = 52,-66
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Size.XScale = 1.8
Size.YScale = 1.3

[State 4080]
Type = Helper
Trigger1 = animelem = 8
StateNo = 3302
ID = 3312
Name = "Ring"
Pos = 27,-75
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Size.XScale = 0.1
Size.YScale = 0.1

[State 200, 3]
type = PlaySnd
trigger1 = animelem = 10
value = 9400, 0

[State 200, 3]
type = PlaySnd
trigger1 = animelem = 9
value = 3300, 1

[State -1]
Type = HitDef
triggerall = hitcount < 30
trigger1 = 1
Attr              = A, HP
Damage            = 30,4
AnimType          = Hard			
HitFlag           = MAF				
GuardFlag         = MA				
Priority          = 2, Hit			
PauseTime         = 0, 8
sparkno = -1			
sparkxy = 0,0 
hitsound   = s100,15
guardsound = s500, 0			
Ground.Type       = High			
Air.Type          = High			
Ground.SlideTime  = 24
Ground.HitTime    = 24				
Air.HitTime       = 24
guard.velocity= -15
Ground.Velocity   = -15,0 - ((p2dist y > -20) * 2.5) + ((p2dist y < -20) * 2.5) - ((hitcount > 28) * 10 )
Air.Velocity      = -15,0 - ((p2dist y > -20) * 2.5) + ((p2dist y < -20) * 2.5) - ((hitcount > 28) * 10 )
AirGuard.Velocity = -7.5,-7.5
Fall              = 1
persistent = 3
fall.recover = 0
getpower = 0
givepower = 0

;[State 0, VarSet]
;type = VarSet
;triggerall = fvar(2) < 0.9
;trigger1 = animelem = 9
;fvar(2) = 0.9
;persistent = 0

;[State 0, VarSet]
;type = VarSet
;trigger1 = movehit = 1
;fvar(2) = fvar(2)*0.99

[State 1000]
Type=posset
trigger1 = pos y > -10
y = 0

;[State 0, VarSet]
;type = VarSet
;triggerall = fvar(2) < 0.9
;trigger1 = animelem = 9
;fvar(2) = 0.9
;persistent = 0

[State 0, VarSet]
type = VarSet
trigger1 = movehit = 1
fvar(2) = fvar(2)*0.975

[State 1000]
Type=ChangeState
triggerall = pos y <= -10
Trigger1=Animtime=0
value=50
ctrl=0

[State 1000]
Type=ChangeState
triggerall = pos y > -10
Trigger1=Animtime=0
value=0
ctrl=1

;---------------------------------------------------------------------------
[Statedef 3301]
type = A
movetype = A
physics = N
ctrl=0
anim=3301
sprpriority=6
velset=0,0

[State AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1,0.04 * var(0) - (var(1) * 0.07) -((time>118)*((time-118)*.08)) 
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = 0

[State 0, VarSet]
type = Varadd
trigger1 = time < 5
var(0) = 4

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger2 = var(1) = 3
trigger3 = time = 113
var(1) = 0

[State 0, VarSet]
type = Varadd
triggerall = time < 113
trigger1 = var(0) = 20
var(1) = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State RemoveHelper]
type = Destroyself
trigger1 = time = 128

;---------------------------------------------------------------------------
[Statedef 3302]
type = A
movetype = A
physics = N
ctrl=0
anim=3302
sprpriority=5
velset=0,0

[State AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1 * var(1) - ((time>118)*((time-118)*.75)) ,1 * var(1) - ((time>118)*((time-118)*.75)) 
value = -30
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1) = 0

[State 0, VarSet]
type = Varadd
trigger1 = time < 10
var(1) = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(2) = 6
var(2) = 0

[State 0, VarSet]
type = Varadd
trigger1 = time
var(2) = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State RemoveHelper]
type = Destroyself
trigger1 = time = 128

;---------------------------------------------------------------------------
[Statedef 3303]
type = A
movetype = A
physics = N
ctrl=0
anim=3304
sprpriority=7
velset=0,0

[State AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1 * var(1) - ((time>120)*((time-120)*.75)) ,1 * var(1) - ((time>120)*((time-120)*.75)) 
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(1) = 0

[State 0, VarSet]
type = Varadd
trigger1 = time < 10
var(1) = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(2) = 6
var(2) = 0

[State 0, VarSet]
type = Varadd
trigger1 = time
var(2) = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 77000]
type = explod
triggerall = time < 110
trigger1 = var(2) = 5
anim = 3303
scale = 0.15, 0.5
postype = p1
vel = 12,0
pos = 0, 2
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State RemoveHelper]
type = Destroyself
trigger1 = time = 120

;---------------------------------------------------------------------------
;Super - Blazing Star
[Statedef 3400]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 3401
;Facep2   = 1
;velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
triggerall = stateno = 3400
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT, AA, AT, AP
time = 1

[State 0, BGPalFX]
type = BGPalFX
trigger1 = !time
time = 180
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4000,0

[State 1000,1]
type = SuperPause
trigger1 = !time
time = 60
poweradd = -2000
unhittable = 1
anim = -1
darken = 0
p2defmul = 1
persistent = 0

[State 1000,2]
type = explod
trigger1 = !time
ID = 3400
anim = 3400
pos = 0,0
scale = 0.61,0.61
vel = -15,-3
postype = p1
sprpriority = 1
supermove = 1
supermovetime = 999
pausemovetime = 999
ownpal = 0
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4000
anim = 4000
pos = -7,-5
scale = 0.9,0.9
postype = p1
sprpriority = 3
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
trigger1 = !time
ID = 4014
anim = 4014
pos = -40,0
scale = 0.4,0.4
postype = back
sprpriority = -9
supermove = 1
supermovetime = 60
pausemovetime = 60
ownpal = 1
bindtime = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(22) = pos y

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time > 0
value = 0
movecamera = 0,0

[State 0, VelSet]
type = posadd
trigger1 = anim = 3401 && animelem = 2
x = -300;IfElse(facing = 1,-1200,1200)

[State 0, VelSet]
type = posset
trigger1 = anim = 3401 && animelem = 2
y = var(22) - 25

[State 0, VelSet]
type = VelSet
trigger1 = anim = 3401 && animelem = 2
x = 25
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3401 && animelem = 2
value = S25000,0

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(23) = 0

[State 0, VarSet]
type = Varadd
trigger1 = moveguarded = 1
var(23) = 1

[State 600]
Type = Helper
triggerall = numhelper(3401) = 0
trigger1 = anim = 3401 && animelem = 2
StateNo = 3401
ID = 3401
Name = "Broom Effect"
Pos = -116,-45
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 5.0
Size.YScale = 3.5

[State 600]
Type = Helper
trigger1 = numhelper(3401) != 0
trigger1 = numhelper(3402) = 0
StateNo = 3402
ID = 3402
Name = "Ring Effect"
Pos = 40,-30
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 1.8
Size.YScale = 1.8

[State 600]
Type = Helper
trigger1 = anim = 3401 && animelem = 3
StateNo = 3403
ID = 3410
Name = "Fullscreen Wave"
Pos = 45,var(22) - 41
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3401 && animelem = 3
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) +5-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3401 && animelem = 3
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -10-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3401 && animelem = 3
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -25-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3401 && animelem = 3
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -55-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3401 && animelem = 3
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -60-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3401 && animelem = 3
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -85-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 0, VelSet]
type = Velmul
trigger1 = movecontact
x = 0.2
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = hitcount = 20 
trigger2 = var(23) = 20
trigger3 = frontedgedist < 0
value = 3402

[State 0, VelSet]
type = VelSet
trigger1 = anim = 3402
x = 25
y = 0

[State 0, PlayerPush]
type = PlayerPush
trigger1 = anim = 3402
value = 0
ignorehitpause = 1
persistent = 1

[State 600]
Type = Helper
trigger1 = anim = 3402 && animelem = 1
StateNo = 3403
ID = 3410
Name = "Fullscreen Wave"
Pos = 45,var(22) - 41
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.15
Size.YScale = 0.48

[State 600]
Type = Helper
trigger1 = anim = 3402 && animelem = 1
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) +5-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3402 && animelem = 1
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -10-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3402 && animelem = 1
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -25-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3402 && animelem = 1
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -55-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3402 && animelem = 1
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -60-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
trigger1 = anim = 3402 && animelem = 1
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = -45+random%90,var(22) -85-random%15
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.15
Size.YScale = 0.24

[State -1]
Type = HitDef
triggerall = hitcount < 19 || moveguarded = [1,8]
triggerall = var(23) < 20
trigger1 = 1
Attr              = A, HA
Damage            = 35,8
AnimType          = Hard			
HitFlag           = MAF				
GuardFlag         = M				
Priority          = 2, Hit			
PauseTime         = 2, 2
sparkno = -1			
sparkxy = 0,0 
hitsound   = s100,2
guardsound = s500, 0			
Ground.Type       = High			
Air.Type          = High			
Ground.SlideTime  = 24
Ground.HitTime    = 24				
Air.HitTime       = 24
guard.velocity=-1
Ground.Velocity   = -1,0 - ((p2dist y > 0) * 2)
Air.Velocity      = -1,0 - ((p2dist y > 0) * 2)
AirGuard.Velocity = -1,-1
Fall              = 1
persistent = 1
fall.recover = 0
getpower = 0
givepower = 0


[State -1]
Type = HitDef
triggerall = hitcount = 19
triggerall = var(23) < 20
trigger1 = 1
Attr              = A, HA
Damage            = 35,8
AnimType          = Hard			
HitFlag           = MAF				
GuardFlag         = M				
Priority          = 2, Hit			
PauseTime         = 4, 4
sparkno = -1			
sparkxy = 0,0 
hitsound   = s100,13
guardsound = s500, 0			
Ground.Type       = High			
Air.Type          = High			
Ground.SlideTime  = 24
Ground.HitTime    = 24				
Air.HitTime       = 24
guard.velocity=-25
Ground.Velocity   = -15,-15
Air.Velocity      = -15,-15
AirGuard.Velocity = -15,-15
Fall              = 1
persistent = 1
fall.recover = 0
getpower = 0
givepower = 0


[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 2

[State 77000]
type = explod
trigger1 = movehit = 1 
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 2

[State 77000]
type = explod
trigger1 = movehit = 1 
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent =2

[State 0, VarSet]
type = VarSet
trigger1 = movehit = 1
fvar(2) = fvar(2)*0.96

[State 1214, PosSet]
type = PosSet
trigger1 = time = 89
x = IfElse(facing = 1,300,-300)
y = -200

[State 0, ChangeState]
type = Turn
trigger1 = time = 89

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 90
value = 101
ctrl = 0

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 3401]
type = A
movetype = A
physics = N
ctrl=0
anim=603
sprpriority=4
velset=0,0

[State 0, BindToParent]
type = BindToParent
triggerall = ishelper(3401)
trigger1 = 1
time = 999
pos = -116,-10
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add 

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent,stateno != 3400 
trigger2 = time = 4 && ishelper(3403)
ignorehitpause = 1
;persistent = 

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 3402]
type = A
movetype = A
physics = N
ctrl=0
anim=187
sprpriority=-4
;velset=0 - (3 * ishelper(1204)),0

[State 0, VelSet]
type = VelSet
trigger1 = ishelper(3404)
x = -3
;ignorehitpause = 
;persistent = 

[State 0, AngleSet]
type = AngleSet
trigger1 = 1
value = 30

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 128 - (time * 15),256

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.9+time*0.09,0.9+time*0.3

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = parent,movetype = H
ignorehitpause = 1

;---------------------------------------------------------------------------
[Statedef 3403]
type = U
movetype = I
physics = N
sprpriority= -2

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !time
trigger1 = ishelper(3410)
value = 3403

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = !time
trigger1 = !ishelper(3410)
value = 3404+random%2

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0
scale = 1,1 - (time * 0.075)
;ignorehitpause = 
;persistent = 

[State 0, Trans]
type = Trans
trigger1 = ishelper(3410)
trans = add 

[State 0, Trans]
type = Trans
trigger1 = !ishelper(3410)
trans = addalpha 
alpha = 40+var(0),256

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(0) = random%100

[State 600]
Type = Helper
triggerall = ishelper(3410)
triggerall = root,stateno = 3400
trigger1 = root,anim != 3402
trigger1 = animtime = 0
StateNo = 3403
ID = 3410
Name = "Fullscreen Wave"
Pos = 0,0
PosType = p1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
triggerall = ishelper(3410)
triggerall = root,stateno = 3400
trigger1 = root,anim != 3402
trigger1 = animtime = 0
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = 0,0
PosType = p1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
triggerall = ishelper(3410)
triggerall = root,stateno = 3400
trigger1 = root,anim != 3402
trigger1 = animtime = 0
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = 0,0
PosType = p1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
triggerall = ishelper(3410)
triggerall = root,stateno = 3400
trigger1 = root,anim != 3402
trigger1 = animtime = 0
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = 0,0
PosType = p1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
triggerall = ishelper(3410)
triggerall = root,stateno = 3400
trigger1 = root,anim != 3402
trigger1 = animtime = 0
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = 0,0
PosType = p1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
triggerall = ishelper(3410)
triggerall = root,stateno = 3400
trigger1 = root,anim != 3402
trigger1 = animtime = 0
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = 0,0
PosType = p1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 600]
Type = Helper
triggerall = ishelper(3410)
triggerall = root,stateno = 3400
trigger1 = root,anim != 3402
trigger1 = animtime = 0
StateNo = 3403
ID = 3411
Name = "Fullscreen Wind"
Pos = 0,0
PosType = p1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.15
Size.YScale = 0.24

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = animtime = 0

;---------------------------------------------------------------------------
;Ultimate - Sun Grazer
[Statedef 4000]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 3500
facep2 = 1
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
triggerall = stateno = 4000
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT, AA, AT, AP
time = 1

[State 0, BGPalFX]
type = BGPalFX
triggerall = anim = 3500
trigger1 = animelem = 8
time = 100
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 1000,1]
type = SuperPause
trigger1 = !time
time = 90
movetime = 90
poweradd = -500
unhittable = 1
anim = -1
darken = 0
p2defmul = 1
persistent = 0

[State 1000,2]
type = explod
triggerall = anim = 3500
trigger1 = animelem = 8
ID = 4000
anim = 4000
pos = 0,0
scale = 1.0,1.0
postype = p1
sprpriority = 1
supermovetime = 90
pausemovetime = 90
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
triggerall = anim = 3500
trigger1 = animelem = 8
ID = 3303
anim = 3303
pos = 0,-40
scale = 0.61,0.61
postype = p1
sprpriority = 1
supermovetime = 90
pausemovetime = 90
ownpal = 1
bindtime = 1

[State 1000,2]
type = explod
triggerall = anim = 3500
trigger1 = animelem = 8
ID = 4016
anim = 4016
pos = -40,0
scale = 0.4,0.4
postype = back
sprpriority = -9
supermove = 1
supermovetime = 90
pausemovetime = 90
ownpal = 1
bindtime = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = anim = 3500
trigger1 = animelem = 8
value = S4000,1 

[State 240, 1]
type = PlaySnd
triggerall = anim = 3500
trigger1 = animelem = 15
value = s210, 0 

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0
ignorehitpause = 1                       

[State 800, 1]
type = HitDef
triggerall = enemy,ishelper = 0
Trigger1 = time = 0
animtype = Up
attr = ,HA,HP,HT
hitflag = MAF   
guardflag =                
priority = 99, Hit  
sparkno = -1    
hitsound = s100,13
guardsound = s500,0      
p1sprpriority = 2  
;pausetime = 0,300             
p1facing = 1
p2facing = 1   
;Ground.Velocity   = -1,-15
;Air.Velocity      = -1,-15
guard.hittime= 30
guard.velocity=-15
guard.slidetime = 30
p2stateno = 4050           
guard.dist = 0 
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
fall.recover = 0

[State 77000]
type = explod
triggerall = anim = 3500
trigger1 = animelem = 15
anim = 3509
scale = 0.72, 0.68
pos = 75, 0
sprpriority = 5
postype = p1
ownpal = 1
removeongethit = 1
ignorehitpause = 0
bindtime = -1
id = 4000
facing = 1
persistent = 0

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6002
scale = 0.54, 0.54
postype = p2
pos = 0, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 0, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = movehit = 1
anim = 6310+random%4
scale = 0.67, 0.67
postype = p2
pos = 0, -65
sprpriority = 7
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 600]
Type = Helper
Trigger1 = movehit = 1
StateNo = 6100
ID = 6100
Name = "Effect Ring"
pos = 0, -65
PosType = P2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.62
Size.YScale = 0.62

;------------------------------ Success
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim = 3500
trigger1 = movehit && animtime = 0
value = 3501

[State 0, ScreenBound]
type = ScreenBound
trigger1 = anim = 3501
value = 0
movecamera = 0,0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = anim = 3501
flag = timerfreeze

[State 0, VelSet]
type = VelSet
trigger1 = anim = 3501 && animelem = 1
x = 0.5
y = -2.0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3501 && animelem = 1
value = S7, 21

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 802
ID = 802
Name = "Star Ring"
Pos = 0, -60
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 805
ID = 1609
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 805
ID = 1610
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 805
ID = 1611
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 600]
Type = Helper
trigger1 = anim = 3501 && animelem = 1
StateNo = 805
ID = 1608
Name = "Star"
postype = p1
pos = 0, -60
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.3
Size.YScale = 0.3

[State 0, VelSet]
type = VelSet
trigger1 = anim = 3501 && animelem = 4
x = 1
y = -0.25

[State 0, VelSet]
type = Velmul
trigger1 = anim = 3501 && animelemtime(4) = [0,33]
x = 1.1

[State 0, VelSet]
type = turn
trigger1 = anim = 3501 && animelemtime(4) = 60

[State 0, VelSet]
type = Velset
trigger1 = anim = 3501 && animelemtime(4) = 60
x = -vel x

[State 600]
Type = Helper
triggerall = numhelper(4010) = 0
trigger1 = anim = 3501 && animelem = 4
StateNo = 4001
ID = 4010
Name = "Broom Effect"
Pos = -96,-10
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 4.0
Size.YScale = 2.1

[State 600]
Type = Helper
Trigger1 = anim = 3501 && animelemtime(4) = 5
StateNo = 1504
ID = 1509
Name = "Light"
Pos = 0, -25
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 3.5
Size.YScale = 3.5

[State 600]
Type = Helper
Trigger1 = anim = 3501 && animelemtime(4) = 5
StateNo = 1507
ID = 1507
Name = "Ring"
Pos = 75, -25
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.22
Size.YScale = 1.06

[State 600]
Type = Helper
Trigger1 = anim = 3501 && animelemtime(4) = 5
StateNo = 1507
ID = 1508
Name = "Ring"
Pos = 75, -25
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 0.275
Size.YScale = 1.325

[State 240, 1]
type = PlaySnd
trigger1 = anim = 3501 && animelem = 4
value = s2600, 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 3501 && animelemtime(4) = 90
value = S25000,0

[State 0, BGPalFX]
type = BGPalFX
trigger1 = anim = 3501 && animelem = 1
time = 220
add = -80,-80,-80
mul = 256,256,256
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = anim = 3501 && animelemtime(4) = 180
value = 4010
ctrl = 0

;------------------------------ Missed
[State 0, ChangeState]
type = ChangeState
triggerall = anim = 3500 
trigger1 = !movehit && animtime = 0
value = 0 + ((pos y <= -1) * 50)
ctrl = 1

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 4001]
type = A
movetype = A
physics = N
ctrl=0
anim=603
sprpriority=4
velset=0,0

[State 0, BindToParent]
type = BindToParent
triggerall = ishelper(4010)
trigger1 = 1
time = 999
pos = -96,-10
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add 

[State 0, Turn]
type = Turn
trigger1 = parent,facing != facing
;ignorehitpause = 
;persistent = 

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent,stateno != 4000 
ignorehitpause = 1
;persistent = 

;---------------------------------------------------------------------------
;Success
[Statedef 4010]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 9999
sprpriority = 7

[State 0, PowerAdd]
type = PowerAdd
trigger1 = !time
value = -2500
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
flag2 = nofg

[State 600]
Type = explod
Trigger1 = !time
anim = 3913
ID = 4100
Pos = -25,0
PosType = left
Ownpal = 1
removetime = -1
bindtime = -1
IgnoreHitPause = 1
Persistent = 0
scale = 500,0.36
sprpriority = 1000000
supermovetime = 9999
pausemovetime = 9999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = anim = 9999
value = SCA,AA,NA,SA,HA,AP,NP,SP,HP,AT,NT,ST,HT
time = 1

[State 600]
Type = Helper
Trigger1 = !time
StateNo = 4014
ID = 4099
Name = "Pos Setter"
Pos = 150,0
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.01
Size.YScale = 0.01
supermovetime = 9999
pausemovetime = 9999

[State 0, VarSet]
type = playsnd
Trigger1 = time = 240
value = s4200,1

[State 600]
Type = Helper
Trigger1 = time = 330
StateNo = 4012
ID = 4012
Name = "Screen Block"
Pos = 0,0
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.78
Size.YScale = 4.78
supermovetime = 9999
pausemovetime = 9999

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = 0

[State 0, ScreenBound]
type = posset
trigger1 = !time
x = helper(4099),pos x
y = -100

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
;movecamera = 1,1

[State 600]
Type = Helper
trigger1 = facing = -1
Trigger1 = time = 30 
StateNo = 4011
ID = 4011
Name = "Collider"
Pos = -330,110
PosType = left
Ownpal = 0
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.61
Size.YScale = 0.61
supermovetime = 9999
pausemovetime = 9999

[State 600]
Type = Helper
trigger1 = facing = 1
Trigger1 = time = 30 
StateNo = 4011
ID = 4011
Name = "Collider"
Pos = 345,10
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 0.61
Size.YScale = 0.61
supermovetime = 9999
pausemovetime = 9999

[State 0, VarSet]
type = VarSet
triggerall = numhelper(4011) = 1
trigger1 = 1
var(33) = helper(4011),var(33)

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 420
value = 4020
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 4011]
type    = U                      
movetype= A                     
physics = N                                          
ctrl = 0    
facep2 = 1                     
anim = 3502                    
poweradd = 0                   
sprpriority = 1000006

[State 6000,~??~]
Type     = DestroySelf
trigger1 = root,stateno = 4020

[State 1001]
Type=Assertspecial
Trigger1=1
flag=noshadow

[State 600]
Type = Helper
trigger1 = !time
StateNo = 4013
ID = 4010
Name = "Broom Effect"
Pos = -365,90
PosType = P1
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 8.0
Size.YScale = 6.0

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 30
y = -10

[State 0, VelSet]
type = VelSet
triggerall = facing = 1
trigger1 = pos x >= (helper(4099),pos x - 30)
x = 0
y = 0

[State 0, VelSet]
type = VelSet
triggerall = facing = -1
trigger1 = pos x <= (helper(4099),pos x + 60)
x = 0
y = 0

[State 0, PosAdd]
type = PosAdd
triggerall = root,time < 330
trigger1 = var(33) = 6
x = 3
y = -1

[State 0, PosAdd]
type = PosAdd
triggerall = root,time >= 330
trigger1 = var(33) = [0,6] 
x = 6
y = -2

[State 0, VarSet]
type = VarSet
trigger1 = !time
trigger2 = var(33) = 6
trigger3 = root,numhelper(4012) = 1
var(33) = 0

[State 0, VarSet]
type = Varadd
triggerall = root,stateno != 4020
trigger1 = vel x = 0
var(33) = 1

[State 0, VarSet]
type = playsnd
triggerall = root,numhelper(4012) = 0
trigger1 = var(33) = 1
value = s100,16

[State 77000]
type = explod
trigger1 = var(33) = 1
anim = 1707+random%2
scale = 0.89, 0.89
postype = p2
pos = 0, 0
sprpriority = 1000009
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6310
facing = 1
persistent = 1

[State 77000]
type = explod
trigger1 = var(33) = 1
anim = 6210+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, 0
sprpriority = 1000008
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent = 2

[State 77000]
type = explod
trigger1 = var(33) = 1
anim = 6310+random%5
scale = 0.86, 0.86
postype = p2
pos = 4, 0
sprpriority = 1000008
ownpal = 1
removeongethit = 0
ignorehitpause = 1
id = 6002
facing = 1
persistent =2

[State 190]
Type     = EnvShake
trigger1 = var(33) = 1
Time     = 10
Freq     = 135
Ampl     = 3
Phase    = 180

;--------------------------------------------------------------------------
[Statedef 4012]
Physics = N
Anim    = 10200
sprpriority = 9999999

[State 0, BindToParent]
type = BindToParent
trigger1 = !time
Pos = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
triggerall = time < 21
trigger1 = 1
trans = addalpha
alpha = 0+time*16,256

[State 0, Trans]
type = Trans
trigger1 = time = [21,100]
trans = none

[State 0, Trans]
type = Trans
trigger1 = time > 100
trans = addalpha
alpha = 256-var(46)*20,256

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
var(46) = 0

[State 0, VarAdd]
type = VarAdd
triggerall = time > 100
trigger1 = 1
var(46) = 1

[State 6000,~??~]
Type     = DestroySelf
Trigger1 = time = 120
;trigger2 = root,stateno = 4020

;-------------------------------------------------------------------------------------------------------------------------------
[Statedef 4013]
type = A
movetype = A
physics = N
ctrl=0
anim=603
sprpriority=1000007
velset=0,0

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 999
pos = -365,90
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 15

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add 

[State ]
type = Assertspecial
Trigger1=1
flag=Noshadow

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,stateno = 4020
ignorehitpause = 1
;persistent = 

;---------------------------------------------------------------------------
[Statedef 4014]
type    = U                      
movetype= A                     
physics = N                                          
ctrl = 0                         
anim = 9999                    
poweradd = 0                   
sprpriority = -999999

[State 0, PosSet]
type = PosSet
trigger1 = pos y != 0
y = 0

[State 1001]
Type=Assertspecial
Trigger1=1
flag=noshadow

;---------------------------------------------------------------------------
[Statedef 4020]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 9999
facep2 = 1
sprpriority = 7

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze
flag2 = nofg

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
ID = 4100

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
ID = 6002

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
ID = 6310

[State 600]
Type = explod
Trigger1 = !time
anim = 3520
ID = 4200
Pos = 0,0
PosType = left
Ownpal = 1
removetime = -1
bindtime = -1
IgnoreHitPause = 1
Persistent = 0
scale = 0.4,0.5
sprpriority = 1000010
supermovetime = 9999
pausemovetime = 9999

[State 600]
Type = explod
Trigger1 = !time
anim = 3521
ID = 4150
Pos = 50,-8
PosType = left
Ownpal = 1
removetime = -1
IgnoreHitPause = 1
Persistent = 0
bindtime = -1
scale = 0.28,0.28
sprpriority = 1000012
supermovetime = 9999
pausemovetime = 9999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 4150
scale = 0.62-(var(36)*0.022)+(time*0.0001),0.62-(var(36)*0.022)+(time*0.0001)

[State 0, VarSet]
type = VarSet
trigger1 = !time
var(36) = 0

[State 0, VarSet]
type = VarAdd
triggerall = var(36) < 15
trigger1 = time
var(36) = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = anim = 9999
value = SCA,AA,NA,SA,HA,AP,NP,SP,HP,AT,NT,ST,HT
time = 1

[State 0, VarSet]
type = playsnd
Trigger1 = !time
value = s4200,0

[State 600]
Type = Helper
Trigger1 = time = 180
StateNo = 4012
ID = 4012
Name = "Screen Block"
Pos = 0,0
PosType = left
Ownpal = 1
IgnoreHitPause = 1
Persistent = 0
Size.XScale = 3.78
Size.YScale = 4.78
supermovetime = 9999
pausemovetime = 9999

[State 600]
Type = Helper
triggerall = enemy,stateno != 4050
triggerall = numhelper(999999) = 0
Triggerall = time > 120
triggerall = time < 269
trigger1 = time%2
StateNo = 4048
ID = 999999
Name = "Custom State Break Destroyer"
Pos = 0, 0
PosType = p2
Ownpal = 1
IgnoreHitPause = 1
Persistent = 1
Size.XScale = 2.33
Size.YScale = 2.33

[State 0, ScreenBound]
type = velset
trigger1 = 1
y = 0

[State 0, ScreenBound]
type = posset
trigger1 = time = 269
y = -600

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
;movecamera = 1,1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 269
ID = 4200

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 269
ID = 4150

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 300
value = 50
ctrl = 0

;---------------------------------------------------------------------------
[Statedef 4048]
type    = A                      
movetype= A                     
physics = N                                          
ctrl = 0                         
anim = 3995                  
poweradd = 0                   
sprpriority = -10000000

[State Hitdef]
type = HitDef
trigger1 = 1
attr = SCA, HA, HP, HT
damage = enemy,lifemax, enemy,lifemax
animtype = Heavy
guardflag = 
hitflag = MAFD
priority = 999, Hit
pausetime = 0,0
guard.pausetime = 0,0
sparkno = -1
sparkxy = 0,0 
hitsound   = -1
guardsound = -1
ground.type = High
air.type = High
ground.hittime  = 0
guard.hittime= 0
ground.velocity = 0,-2
guard.velocity=0
guard.slidetime = 0
air.velocity =0,-2
airguard.velocity=0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
fall = 1
fall.recover = 0
getpower = 0
givepower = 0
kill = 1

[State 1001]
Type=Assertspecial
Trigger1=1
flag=noshadow

[State 1001]
Type=Destroyself
Trigger1= animtime = 0

;---------------------------------------------------------------------------
;Enemy State
[Statedef 4050]
type    = A
movetype= H
physics = N
ctrl = 0

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 0
y = -15

[State 0, ScreenBound]
type = ScreenBound
trigger1 = enemy,stateno = 4000
value = 0
;movecamera = 0,0

[State 0, ScreenBound]
type = ScreenBound
triggerall = enemy,time = [0,333]
trigger1 = enemy,stateno = 4010
value = 1
;movecamera = 0,0

[State 0, ScreenBound]
type = ScreenBound
triggerall = enemy,time > 333
trigger1 = enemy,stateno = 4010
value = 0
;movecamera = 0,0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = enemy,stateno = 4020
value = 0
movecamera = 0,0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = loseko
value = 0
;movecamera = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = enemy,stateno = 4010
value = 1000005

[State 0, SprPriority]
type = SprPriority
trigger1 = enemy,stateno = 4020
value = 0

[State VelSet]
type = VelSet
triggerall = anim != 10001
trigger1 = enemy,stateno = 4010; && enemy,time = 1
x = 0
y = -1

[State 0, PosSet]
type = PosSet
trigger1 = enemy,stateno = 4010
x = helper(4099),pos x
y = helper(4099),pos y + 24
persistent = 0

[State VelSet]
type = VelSet
triggerall = enemy,stateno = 4010 
trigger1 = time > 300
x = 0
y = 0

[State 4000]
type = Changeanim
triggerall = SelfAnimExist(5051)
trigger1 = !time
value = 5051
ignorehitpause = 1
persistent = 1

[State 4000]
type = Changeanim
triggerall = !SelfAnimExist(5051)
trigger1 = !time
value = 5030
ignorehitpause = 1
persistent = 1

[State 4000]
type = Changeanim2
triggerall = enemy,stateno = 4010 
trigger1 = enemy,var(33) = 1
value = 10001
ignorehitpause = 1
persistent = 1

;[State 0, PosAdd]
;type = Posset
;trigger1 = enemy,numexplod(6002) >= 1
;trigger1 = enemy,var(33) = 6
;x = helper(4011),pos x
;y = helper(4011),pos y

[State 0, PosAdd]
type = Posset
trigger1 = anim = 10001
x = helper(4099),pos x
y = helper(4099),pos y - 65
persistent = 0

[State 0, PosAdd]
type = PosAdd
triggerall = enemy,time < 330
triggerall = enemy,stateno = 4010 
trigger1 = enemy,var(33) = 6
x = -3
y = -1

[State 0, PosAdd]
type = PosAdd
triggerall = enemy,time >= 330
triggerall = enemy,stateno = 4010 
trigger1 = enemy,var(33) = [0,6]
x = -6
y = -2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,AA,NA,SA,HA,AP,NP,SP,HP,AT,NT,ST,HT
time = 1

[state 0,0]
type = lifeadd
trigger1 = enemy,stateno = 4020 && enemy,time = 100
trigger2 = stateno = 4050 && enemy,stateno != [4000,4050]
value = -999999999999999999
kill = 1
absolute = 1

[State 210, 3]
type = posset
triggerall = facing = 1
trigger1 = enemy,stateno = 4020 && enemy,time = 269
x = enemynear,pos x - 70
y = -900
persistent = 0

[State 210, 3]
type = posset
triggerall = facing = -1
trigger1 = enemy,stateno = 4020 && enemy,time = 269
x = enemynear,pos x + 70
y = -900
persistent = 0

[State 210, 3]
type = selfState
trigger1 = enemy,stateno = 4020 && enemy,time = 299
value = 5050
ctrl = 0